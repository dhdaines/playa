
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="PLAYA ain't a LAYout Analyzer">
      
      
        <meta name="author" content="David Huggins-Daines">
      
      
        <link rel="canonical" href="https://dhdaines.github.io/playa/0.4.2/reference/">
      
      
        <link rel="prev" href="../cli/">
      
      
        <link rel="next" href="../data/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Reference - PLAYA</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PLAYA" class="md-header__button md-logo" aria-label="PLAYA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PLAYA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/dhdaines/playa" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dhdaines/playa
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PLAYA" class="md-nav__button md-logo" aria-label="PLAYA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PLAYA
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dhdaines/playa" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dhdaines/playa
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#playa" class="md-nav__link">
    <span class="md-ellipsis">
      playa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="playa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.open" class="md-nav__link">
    <span class="md-ellipsis">
      open
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.document" class="md-nav__link">
    <span class="md-ellipsis">
      document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations" class="md-nav__link">
    <span class="md-ellipsis">
      Destinations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Destinations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.items" class="md-nav__link">
    <span class="md-ellipsis">
      items
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document" class="md-nav__link">
    <span class="md-ellipsis">
      Document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.destinations" class="md-nav__link">
    <span class="md-ellipsis">
      destinations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.names" class="md-nav__link">
    <span class="md-ellipsis">
      names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.objects" class="md-nav__link">
    <span class="md-ellipsis">
      objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.outline" class="md-nav__link">
    <span class="md-ellipsis">
      outline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.page_labels" class="md-nav__link">
    <span class="md-ellipsis">
      page_labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.pages" class="md-nav__link">
    <span class="md-ellipsis">
      pages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.parent_tree" class="md-nav__link">
    <span class="md-ellipsis">
      parent_tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.structure" class="md-nav__link">
    <span class="md-ellipsis">
      structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._find_xref" class="md-nav__link">
    <span class="md-ellipsis">
      _find_xref
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._get_page_objects" class="md-nav__link">
    <span class="md-ellipsis">
      _get_page_objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._get_pages_from_xrefs" class="md-nav__link">
    <span class="md-ellipsis">
      _get_pages_from_xrefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._initialize_password" class="md-nav__link">
    <span class="md-ellipsis">
      _initialize_password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._read_xref_from" class="md-nav__link">
    <span class="md-ellipsis">
      _read_xref_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageLabels" class="md-nav__link">
    <span class="md-ellipsis">
      PageLabels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageLabels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.PageLabels._format_page_label" class="md-nav__link">
    <span class="md-ellipsis">
      _format_page_label
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList" class="md-nav__link">
    <span class="md-ellipsis">
      PageList
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageList">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.by_id" class="md-nav__link">
    <span class="md-ellipsis">
      by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.map" class="md-nav__link">
    <span class="md-ellipsis">
      map
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.call_page" class="md-nav__link">
    <span class="md-ellipsis">
      call_page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
    <nav class="md-nav" aria-label="page">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation" class="md-nav__link">
    <span class="md-ellipsis">
      Annotation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Annotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.mtime" class="md-nav__link">
    <span class="md-ellipsis">
      mtime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject" class="md-nav__link">
    <span class="md-ellipsis">
      ContentObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.mcid" class="md-nav__link">
    <span class="md-ellipsis">
      mcid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.mcs" class="md-nav__link">
    <span class="md-ellipsis">
      mcs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.object_type" class="md-nav__link">
    <span class="md-ellipsis">
      object_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.DashPattern" class="md-nav__link">
    <span class="md-ellipsis">
      DashPattern
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.GlyphObject" class="md-nav__link">
    <span class="md-ellipsis">
      GlyphObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GlyphObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.GlyphObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.GraphicState" class="md-nav__link">
    <span class="md-ellipsis">
      GraphicState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject" class="md-nav__link">
    <span class="md-ellipsis">
      ImageObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject.buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.MarkedContent" class="md-nav__link">
    <span class="md-ellipsis">
      MarkedContent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page" class="md-nav__link">
    <span class="md-ellipsis">
      Page
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Page">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.annotations" class="md-nav__link">
    <span class="md-ellipsis">
      annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.height" class="md-nav__link">
    <span class="md-ellipsis">
      height
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.images" class="md-nav__link">
    <span class="md-ellipsis">
      images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.paths" class="md-nav__link">
    <span class="md-ellipsis">
      paths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.streams" class="md-nav__link">
    <span class="md-ellipsis">
      streams
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.texts" class="md-nav__link">
    <span class="md-ellipsis">
      texts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.width" class="md-nav__link">
    <span class="md-ellipsis">
      width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.xobjects" class="md-nav__link">
    <span class="md-ellipsis">
      xobjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text_tagged" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text_tagged
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text_untagged" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text_untagged
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.flatten" class="md-nav__link">
    <span class="md-ellipsis">
      flatten
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject" class="md-nav__link">
    <span class="md-ellipsis">
      PathObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PathObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.segments" class="md-nav__link">
    <span class="md-ellipsis">
      segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathSegment" class="md-nav__link">
    <span class="md-ellipsis">
      PathSegment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject" class="md-nav__link">
    <span class="md-ellipsis">
      TagObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TagObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.mcid" class="md-nav__link">
    <span class="md-ellipsis">
      mcid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.mcs" class="md-nav__link">
    <span class="md-ellipsis">
      mcs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject" class="md-nav__link">
    <span class="md-ellipsis">
      TextObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.chars" class="md-nav__link">
    <span class="md-ellipsis">
      chars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextState" class="md-nav__link">
    <span class="md-ellipsis">
      TextState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TextState.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject" class="md-nav__link">
    <span class="md-ellipsis">
      XObjectObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XObjectObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page._extract_text_from_obj" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_text_from_obj
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.parser" class="md-nav__link">
    <span class="md-ellipsis">
      parser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser" class="md-nav__link">
    <span class="md-ellipsis">
      IndirectObjectParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IndirectObjectParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.InlineImage" class="md-nav__link">
    <span class="md-ellipsis">
      InlineImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer" class="md-nav__link">
    <span class="md-ellipsis">
      Lexer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lexer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.__next__" class="md-nav__link">
    <span class="md-ellipsis">
      __next__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.nextline" class="md-nav__link">
    <span class="md-ellipsis">
      nextline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.read" class="md-nav__link">
    <span class="md-ellipsis">
      read
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.tell" class="md-nav__link">
    <span class="md-ellipsis">
      tell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser" class="md-nav__link">
    <span class="md-ellipsis">
      ObjectParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ObjectParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.__next__" class="md-nav__link">
    <span class="md-ellipsis">
      __next__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.get_inline_image" class="md-nav__link">
    <span class="md-ellipsis">
      get_inline_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.get_object_reference" class="md-nav__link">
    <span class="md-ellipsis">
      get_object_reference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.newstream" class="md-nav__link">
    <span class="md-ellipsis">
      newstream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.nextline" class="md-nav__link">
    <span class="md-ellipsis">
      nextline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.nexttoken" class="md-nav__link">
    <span class="md-ellipsis">
      nexttoken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.pop_to" class="md-nav__link">
    <span class="md-ellipsis">
      pop_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.read" class="md-nav__link">
    <span class="md-ellipsis">
      read
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.tell" class="md-nav__link">
    <span class="md-ellipsis">
      tell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectStreamParser" class="md-nav__link">
    <span class="md-ellipsis">
      ObjectStreamParser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.reverse_iter_lines" class="md-nav__link">
    <span class="md-ellipsis">
      reverse_iter_lines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.structure" class="md-nav__link">
    <span class="md-ellipsis">
      structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentItem" class="md-nav__link">
    <span class="md-ellipsis">
      ContentItem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentItem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentItem.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject" class="md-nav__link">
    <span class="md-ellipsis">
      ContentObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.obj" class="md-nav__link">
    <span class="md-ellipsis">
      obj
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element" class="md-nav__link">
    <span class="md-ellipsis">
      Element
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Element">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable" class="md-nav__link">
    <span class="md-ellipsis">
      Findable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Findable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable.find_all" class="md-nav__link">
    <span class="md-ellipsis">
      find_all
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Tree" class="md-nav__link">
    <span class="md-ellipsis">
      Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Tree.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.outline" class="md-nav__link">
    <span class="md-ellipsis">
      outline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action" class="md-nav__link">
    <span class="md-ellipsis">
      Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action.destination" class="md-nav__link">
    <span class="md-ellipsis">
      destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Destination" class="md-nav__link">
    <span class="md-ellipsis">
      Destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline" class="md-nav__link">
    <span class="md-ellipsis">
      Outline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.destination" class="md-nav__link">
    <span class="md-ellipsis">
      destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.element" class="md-nav__link">
    <span class="md-ellipsis">
      element
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.worker.in_worker" class="md-nav__link">
    <span class="md-ellipsis">
      in_worker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data API
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#playa" class="md-nav__link">
    <span class="md-ellipsis">
      playa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="playa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.open" class="md-nav__link">
    <span class="md-ellipsis">
      open
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.document" class="md-nav__link">
    <span class="md-ellipsis">
      document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations" class="md-nav__link">
    <span class="md-ellipsis">
      Destinations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Destinations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Destinations.items" class="md-nav__link">
    <span class="md-ellipsis">
      items
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document" class="md-nav__link">
    <span class="md-ellipsis">
      Document
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.destinations" class="md-nav__link">
    <span class="md-ellipsis">
      destinations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.names" class="md-nav__link">
    <span class="md-ellipsis">
      names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.objects" class="md-nav__link">
    <span class="md-ellipsis">
      objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.outline" class="md-nav__link">
    <span class="md-ellipsis">
      outline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.page_labels" class="md-nav__link">
    <span class="md-ellipsis">
      page_labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.pages" class="md-nav__link">
    <span class="md-ellipsis">
      pages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.parent_tree" class="md-nav__link">
    <span class="md-ellipsis">
      parent_tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.structure" class="md-nav__link">
    <span class="md-ellipsis">
      structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._find_xref" class="md-nav__link">
    <span class="md-ellipsis">
      _find_xref
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._get_page_objects" class="md-nav__link">
    <span class="md-ellipsis">
      _get_page_objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._get_pages_from_xrefs" class="md-nav__link">
    <span class="md-ellipsis">
      _get_pages_from_xrefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._initialize_password" class="md-nav__link">
    <span class="md-ellipsis">
      _initialize_password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.Document._read_xref_from" class="md-nav__link">
    <span class="md-ellipsis">
      _read_xref_from
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageLabels" class="md-nav__link">
    <span class="md-ellipsis">
      PageLabels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageLabels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.PageLabels._format_page_label" class="md-nav__link">
    <span class="md-ellipsis">
      _format_page_label
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList" class="md-nav__link">
    <span class="md-ellipsis">
      PageList
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageList">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.by_id" class="md-nav__link">
    <span class="md-ellipsis">
      by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.PageList.map" class="md-nav__link">
    <span class="md-ellipsis">
      map
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.document.call_page" class="md-nav__link">
    <span class="md-ellipsis">
      call_page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
    <nav class="md-nav" aria-label="page">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation" class="md-nav__link">
    <span class="md-ellipsis">
      Annotation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Annotation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.mtime" class="md-nav__link">
    <span class="md-ellipsis">
      mtime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Annotation.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject" class="md-nav__link">
    <span class="md-ellipsis">
      ContentObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.mcid" class="md-nav__link">
    <span class="md-ellipsis">
      mcid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.mcs" class="md-nav__link">
    <span class="md-ellipsis">
      mcs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.object_type" class="md-nav__link">
    <span class="md-ellipsis">
      object_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ContentObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.DashPattern" class="md-nav__link">
    <span class="md-ellipsis">
      DashPattern
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.GlyphObject" class="md-nav__link">
    <span class="md-ellipsis">
      GlyphObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GlyphObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.GlyphObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.GraphicState" class="md-nav__link">
    <span class="md-ellipsis">
      GraphicState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject" class="md-nav__link">
    <span class="md-ellipsis">
      ImageObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ImageObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject.buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.ImageObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.MarkedContent" class="md-nav__link">
    <span class="md-ellipsis">
      MarkedContent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page" class="md-nav__link">
    <span class="md-ellipsis">
      Page
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Page">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.annotations" class="md-nav__link">
    <span class="md-ellipsis">
      annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.height" class="md-nav__link">
    <span class="md-ellipsis">
      height
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.images" class="md-nav__link">
    <span class="md-ellipsis">
      images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.paths" class="md-nav__link">
    <span class="md-ellipsis">
      paths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.streams" class="md-nav__link">
    <span class="md-ellipsis">
      streams
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.texts" class="md-nav__link">
    <span class="md-ellipsis">
      texts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.width" class="md-nav__link">
    <span class="md-ellipsis">
      width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.xobjects" class="md-nav__link">
    <span class="md-ellipsis">
      xobjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text_tagged" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text_tagged
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.extract_text_untagged" class="md-nav__link">
    <span class="md-ellipsis">
      extract_text_untagged
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.Page.flatten" class="md-nav__link">
    <span class="md-ellipsis">
      flatten
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject" class="md-nav__link">
    <span class="md-ellipsis">
      PathObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PathObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.segments" class="md-nav__link">
    <span class="md-ellipsis">
      segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.PathSegment" class="md-nav__link">
    <span class="md-ellipsis">
      PathSegment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject" class="md-nav__link">
    <span class="md-ellipsis">
      TagObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TagObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.mcid" class="md-nav__link">
    <span class="md-ellipsis">
      mcid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.mcs" class="md-nav__link">
    <span class="md-ellipsis">
      mcs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TagObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject" class="md-nav__link">
    <span class="md-ellipsis">
      TextObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.chars" class="md-nav__link">
    <span class="md-ellipsis">
      chars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextObject.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      __len__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.TextState" class="md-nav__link">
    <span class="md-ellipsis">
      TextState
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.TextState.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject" class="md-nav__link">
    <span class="md-ellipsis">
      XObjectObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XObjectObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.buffer" class="md-nav__link">
    <span class="md-ellipsis">
      buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.contents" class="md-nav__link">
    <span class="md-ellipsis">
      contents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page.XObjectObject.tokens" class="md-nav__link">
    <span class="md-ellipsis">
      tokens
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.page._extract_text_from_obj" class="md-nav__link">
    <span class="md-ellipsis">
      _extract_text_from_obj
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.parser" class="md-nav__link">
    <span class="md-ellipsis">
      parser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser" class="md-nav__link">
    <span class="md-ellipsis">
      IndirectObjectParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IndirectObjectParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.IndirectObjectParser.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.InlineImage" class="md-nav__link">
    <span class="md-ellipsis">
      InlineImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer" class="md-nav__link">
    <span class="md-ellipsis">
      Lexer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lexer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.__next__" class="md-nav__link">
    <span class="md-ellipsis">
      __next__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.nextline" class="md-nav__link">
    <span class="md-ellipsis">
      nextline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.read" class="md-nav__link">
    <span class="md-ellipsis">
      read
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.Lexer.tell" class="md-nav__link">
    <span class="md-ellipsis">
      tell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser" class="md-nav__link">
    <span class="md-ellipsis">
      ObjectParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ObjectParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      __iter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.__next__" class="md-nav__link">
    <span class="md-ellipsis">
      __next__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.get_inline_image" class="md-nav__link">
    <span class="md-ellipsis">
      get_inline_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.get_object_reference" class="md-nav__link">
    <span class="md-ellipsis">
      get_object_reference
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.newstream" class="md-nav__link">
    <span class="md-ellipsis">
      newstream
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.nextline" class="md-nav__link">
    <span class="md-ellipsis">
      nextline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.nexttoken" class="md-nav__link">
    <span class="md-ellipsis">
      nexttoken
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.pop_to" class="md-nav__link">
    <span class="md-ellipsis">
      pop_to
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.read" class="md-nav__link">
    <span class="md-ellipsis">
      read
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.seek" class="md-nav__link">
    <span class="md-ellipsis">
      seek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectParser.tell" class="md-nav__link">
    <span class="md-ellipsis">
      tell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.ObjectStreamParser" class="md-nav__link">
    <span class="md-ellipsis">
      ObjectStreamParser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.parser.reverse_iter_lines" class="md-nav__link">
    <span class="md-ellipsis">
      reverse_iter_lines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.structure" class="md-nav__link">
    <span class="md-ellipsis">
      structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentItem" class="md-nav__link">
    <span class="md-ellipsis">
      ContentItem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentItem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentItem.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject" class="md-nav__link">
    <span class="md-ellipsis">
      ContentObject
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContentObject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.obj" class="md-nav__link">
    <span class="md-ellipsis">
      obj
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.ContentObject.type" class="md-nav__link">
    <span class="md-ellipsis">
      type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element" class="md-nav__link">
    <span class="md-ellipsis">
      Element
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Element">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.page" class="md-nav__link">
    <span class="md-ellipsis">
      page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Element.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable" class="md-nav__link">
    <span class="md-ellipsis">
      Findable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Findable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable.find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Findable.find_all" class="md-nav__link">
    <span class="md-ellipsis">
      find_all
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.structure.Tree" class="md-nav__link">
    <span class="md-ellipsis">
      Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.structure.Tree.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.outline" class="md-nav__link">
    <span class="md-ellipsis">
      outline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action" class="md-nav__link">
    <span class="md-ellipsis">
      Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action.destination" class="md-nav__link">
    <span class="md-ellipsis">
      destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Action.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Destination" class="md-nav__link">
    <span class="md-ellipsis">
      Destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline" class="md-nav__link">
    <span class="md-ellipsis">
      Outline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.destination" class="md-nav__link">
    <span class="md-ellipsis">
      destination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.doc" class="md-nav__link">
    <span class="md-ellipsis">
      doc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#playa.outline.Outline.element" class="md-nav__link">
    <span class="md-ellipsis">
      element
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#playa.worker" class="md-nav__link">
    <span class="md-ellipsis">
      worker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="worker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playa.worker.in_worker" class="md-nav__link">
    <span class="md-ellipsis">
      in_worker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="reference">Reference</h1>


<div class="doc doc-object doc-module">



<h2 id="playa" class="doc doc-heading">
            <code>playa</code>


</h2>

    <div class="doc doc-contents first">

        <p>PLAYA ain't a LAYout Analyzer... but it can help you get stuff
out of PDFs.</p>
<p>Basic usage:</p>
<pre><code>with playa.open(path) as pdf:
    for page in pdf.pages:
        print(f"page {page.label}:")
        for obj in page:
            print(f"    {obj.object_type} at {obj.bbox}")
            if obj.object_type == "text":
                print(f"        chars: {obj.chars}")
</code></pre>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="playa.open" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mp_context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Open a PDF document from a path on the filesystem.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="os.PathLike">PathLike</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the document to open.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>space</code>
            </td>
            <td>
                  <code><span title="playa.page.DeviceSpace">DeviceSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Device space to use ("screen" for screen-like
   coordinates, "page" for pdfminer.six-like coordinates, "default" for
   default user space with no rotation or translation)</p>
              </div>
            </td>
            <td>
                  <code>&#39;screen&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_workers</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="int">int</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of worker processes to use for parallel
         processing of pages (if 1, no workers are spawned)</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mp_context</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="multiprocessing.context.BaseContext">BaseContext</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Multiprocessing context to use for worker
        processes, see <a href="https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods">Contexts and Start
        Methods</a>
        for more information.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PathLike</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">space</span><span class="p">:</span> <span class="n">DeviceSpace</span> <span class="o">=</span> <span class="s2">&quot;screen&quot;</span><span class="p">,</span>
    <span class="n">max_workers</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">mp_context</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseContext</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open a PDF document from a path on the filesystem.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to the document to open.</span>
<span class="sd">        space: Device space to use (&quot;screen&quot; for screen-like</span>
<span class="sd">               coordinates, &quot;page&quot; for pdfminer.six-like coordinates, &quot;default&quot; for</span>
<span class="sd">               default user space with no rotation or translation)</span>
<span class="sd">        max_workers: Number of worker processes to use for parallel</span>
<span class="sd">                     processing of pages (if 1, no workers are spawned)</span>
<span class="sd">        mp_context: Multiprocessing context to use for worker</span>
<span class="sd">                    processes, see [Contexts and Start</span>
<span class="sd">                    Methods](https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods)</span>
<span class="sd">                    for more information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="n">space</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">_fp</span> <span class="o">=</span> <span class="n">fp</span>
    <span class="k">if</span> <span class="n">max_workers</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">max_workers</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="n">ProcessPoolExecutor</span><span class="p">(</span>
            <span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">,</span>
            <span class="n">mp_context</span><span class="o">=</span><span class="n">mp_context</span><span class="p">,</span>
            <span class="n">initializer</span><span class="o">=</span><span class="n">_init_worker</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="n">initargs</span><span class="o">=</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">pdf</span><span class="p">),</span> <span class="n">path</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">space</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">pdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="playa.parse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span> <span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mp_context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Read a PDF document from binary data.</p>


<details class="note" open>
  <summary>Potential slowness</summary>
  <p>When using multiple processes, this results in the entire
buffer being copied to the worker processes for the moment,
which may cause some overhead.  It is preferable to use <code>open</code>
on a filesystem path if possible, since that uses
memory-mapped I/O.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>buffer</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Buffer containing PDF data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>space</code>
            </td>
            <td>
                  <code><span title="playa.page.DeviceSpace">DeviceSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Device space to use ("screen" for screen-like
   coordinates, "page" for pdfminer.six-like coordinates, "default" for
   default user space with no rotation or translation)</p>
              </div>
            </td>
            <td>
                  <code>&#39;screen&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_workers</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="int">int</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of worker processes to use for parallel
         processing of pages (if 1, no workers are spawned)</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mp_context</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="multiprocessing.context.BaseContext">BaseContext</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Multiprocessing context to use for worker
        processes, see <a href="https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods">Contexts and Start
        Methods</a>
        for more information.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
    <span class="n">buffer</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">space</span><span class="p">:</span> <span class="n">DeviceSpace</span> <span class="o">=</span> <span class="s2">&quot;screen&quot;</span><span class="p">,</span>
    <span class="n">max_workers</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">mp_context</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseContext</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Document</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read a PDF document from binary data.</span>

<span class="sd">    Note: Potential slowness</span>
<span class="sd">        When using multiple processes, this results in the entire</span>
<span class="sd">        buffer being copied to the worker processes for the moment,</span>
<span class="sd">        which may cause some overhead.  It is preferable to use `open`</span>
<span class="sd">        on a filesystem path if possible, since that uses</span>
<span class="sd">        memory-mapped I/O.</span>

<span class="sd">    Args:</span>
<span class="sd">        buffer: Buffer containing PDF data.</span>
<span class="sd">        space: Device space to use (&quot;screen&quot; for screen-like</span>
<span class="sd">               coordinates, &quot;page&quot; for pdfminer.six-like coordinates, &quot;default&quot; for</span>
<span class="sd">               default user space with no rotation or translation)</span>
<span class="sd">        max_workers: Number of worker processes to use for parallel</span>
<span class="sd">                     processing of pages (if 1, no workers are spawned)</span>
<span class="sd">        mp_context: Multiprocessing context to use for worker</span>
<span class="sd">                    processes, see [Contexts and Start</span>
<span class="sd">                    Methods](https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods)</span>
<span class="sd">                    for more information.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="n">space</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">max_workers</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">max_workers</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">pdf</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="n">ProcessPoolExecutor</span><span class="p">(</span>
            <span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">,</span>
            <span class="n">mp_context</span><span class="o">=</span><span class="n">mp_context</span><span class="p">,</span>
            <span class="n">initializer</span><span class="o">=</span><span class="n">_init_worker_buffer</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="n">initargs</span><span class="o">=</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">pdf</span><span class="p">),</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">space</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">pdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.document" class="doc doc-heading">
            <code>playa.document</code>


</h2>

    <div class="doc doc-contents first">

        <p>Basic classes for PDF document parsing.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="playa.document.Destinations" class="doc doc-heading">
            <code>Destinations</code>


</h3>


    <div class="doc doc-contents ">


        <p>Mapping of named destinations.</p>
<p>These either come as a NameTree or a dict, depending on the
version of the PDF standard, so this abstracts that away.</p>







              <details class="quote">
                <summary>Source code in <code>playa/document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Destinations</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mapping of named destinations.</span>

<span class="sd">    These either come as a NameTree or a dict, depending on the</span>
<span class="sd">    version of the PDF standard, so this abstracts that away.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dests_dict</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">dests_tree</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">NameTree</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_docref</span> <span class="o">=</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Destination</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s2">&quot;Dests&quot;</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="c1"># PDF-1.1: dictionary</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Dests&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Dests entry in catalog is not dictionary: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="s2">&quot;Names&quot;</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Names&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Names entry in catalog is not dictionary: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="s2">&quot;Dests&quot;</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                <span class="n">dests</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;Dests&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Dests entry in names is not dictionary: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dests</span><span class="p">)</span>
                    <span class="k">return</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="o">=</span> <span class="n">NameTree</span><span class="p">(</span><span class="n">dests</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over names of destinations.</span>

<span class="sd">        Danger: Beware of corrupted PDFs</span>
<span class="sd">            This simply iterates over the names listed in the PDF, and</span>
<span class="sd">            does not attempt to actually parse the destinations</span>
<span class="sd">            (because that&#39;s pretty slow).  If the PDF is broken, you</span>
<span class="sd">            may encounter exceptions when actually trying to access</span>
<span class="sd">            them by name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">kb</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
                <span class="n">ks</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">kb</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">ks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Destination</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over named destinations.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
                    <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
                    <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Destination</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a named destination.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the destination.</span>

<span class="sd">        Raises:</span>
<span class="sd">            KeyError: If no such destination exists.</span>
<span class="sd">            TypeError: If the PDF is damaged and the destinations tree</span>
<span class="sd">                contains something unexpected or missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">literal_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This will raise KeyError or TypeError if necessary, so</span>
            <span class="c1"># we don&#39;t have to do it explicitly</span>
            <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This is not at all efficient, but we need to decode</span>
            <span class="c1"># the keys (and we cache the result...)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                    <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="c1"># This will also raise KeyError if necessary</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">PDFObject</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Destination</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Destination</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;D&quot;</span> <span class="ow">in</span> <span class="n">dest</span><span class="p">:</span>
            <span class="n">destlist</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">dest</span><span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">destlist</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid destination for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Destination</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">destlist</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid destination for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Destinations.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.document.Destinations.__getitem__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a named destination.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="bytes">bytes</span>, <span title="str">str</span>, <span title="playa.parser.PSLiteral">PSLiteral</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the destination.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no such destination exists.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the PDF is damaged and the destinations tree
contains something unexpected or missing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Destination</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a named destination.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the destination.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KeyError: If no such destination exists.</span>
<span class="sd">        TypeError: If the PDF is damaged and the destinations tree</span>
<span class="sd">            contains something unexpected or missing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">literal_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># This will raise KeyError or TypeError if necessary, so</span>
        <span class="c1"># we don&#39;t have to do it explicitly</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># This is not at all efficient, but we need to decode</span>
        <span class="c1"># the keys (and we cache the result...)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">break</span>
    <span class="c1"># This will also raise KeyError if necessary</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Destinations.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over names of destinations.</p>


<details class="danger" open>
  <summary>Beware of corrupted PDFs</summary>
  <p>This simply iterates over the names listed in the PDF, and
does not attempt to actually parse the destinations
(because that's pretty slow).  If the PDF is broken, you
may encounter exceptions when actually trying to access
them by name.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span>
<span class="normal">991</span>
<span class="normal">992</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over names of destinations.</span>

<span class="sd">    Danger: Beware of corrupted PDFs</span>
<span class="sd">        This simply iterates over the names listed in the PDF, and</span>
<span class="sd">        does not attempt to actually parse the destinations</span>
<span class="sd">        (because that&#39;s pretty slow).  If the PDF is broken, you</span>
<span class="sd">        may encounter exceptions when actually trying to access</span>
<span class="sd">        them by name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">kb</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
            <span class="n">ks</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">kb</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Destinations.items" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">items</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over named destinations.</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Destination</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over named destinations.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">dest</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
                <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dests_dict</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests_tree</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">:</span>
                <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dest</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dests</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.document.Document" class="doc doc-heading">
            <code>Document</code>


</h3>


    <div class="doc doc-contents ">


        <p>Representation of a PDF document.</p>
<p>Since PDF documents can be very large and complex, merely creating
a <code>Document</code> does very little aside from verifying that the
password is correct and getting a minimal amount of metadata.  In
general, PLAYA will try to open just about anything as a PDF, so
you should not expect the constructor to fail here if you give it
nonsense (something else may fail later on).</p>
<p>Some metadata, such as the structure tree and page tree, will be
loaded lazily and cached.  We do not handle modification of PDFs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fp</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="typing.BinaryIO">BinaryIO</span>, <span title="bytes">bytes</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File-like object in binary mode, or a buffer with binary data.
  Files will be read using <code>mmap</code> if possible.  They do not need
  to be seekable, as if <code>mmap</code> fails the entire file will simply
  be read into memory (so a pipe or socket ought to work).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>password</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Password for decryption, if needed.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>space</code>
            </td>
            <td>
                  <code><span title="playa.page.DeviceSpace">DeviceSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the device space to use for interpreting content ("screen"
  or "page")</p>
              </div>
            </td>
            <td>
                  <code>&#39;screen&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if <code>fp</code> is a file opened in text mode (don't do that!)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="playa.exceptions.PDFEncryptionError">PDFEncryptionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the PDF has an unsupported encryption scheme</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="playa.exceptions.PDFPasswordIncorrect">PDFPasswordIncorrect</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the password is incorrect</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Document</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a PDF document.</span>

<span class="sd">    Since PDF documents can be very large and complex, merely creating</span>
<span class="sd">    a `Document` does very little aside from verifying that the</span>
<span class="sd">    password is correct and getting a minimal amount of metadata.  In</span>
<span class="sd">    general, PLAYA will try to open just about anything as a PDF, so</span>
<span class="sd">    you should not expect the constructor to fail here if you give it</span>
<span class="sd">    nonsense (something else may fail later on).</span>

<span class="sd">    Some metadata, such as the structure tree and page tree, will be</span>
<span class="sd">    loaded lazily and cached.  We do not handle modification of PDFs.</span>

<span class="sd">    Args:</span>
<span class="sd">      fp: File-like object in binary mode, or a buffer with binary data.</span>
<span class="sd">          Files will be read using `mmap` if possible.  They do not need</span>
<span class="sd">          to be seekable, as if `mmap` fails the entire file will simply</span>
<span class="sd">          be read into memory (so a pipe or socket ought to work).</span>
<span class="sd">      password: Password for decryption, if needed.</span>
<span class="sd">      space: the device space to use for interpreting content (&quot;screen&quot;</span>
<span class="sd">          or &quot;page&quot;)</span>

<span class="sd">    Raises:</span>
<span class="sd">      TypeError: if `fp` is a file opened in text mode (don&#39;t do that!)</span>
<span class="sd">      PDFEncryptionError: if the PDF has an unsupported encryption scheme</span>
<span class="sd">      PDFPasswordIncorrect: if the password is incorrect</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_fp</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_pages</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;PageList&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_pool</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Executor</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_outline</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Outline&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_destinations</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Destinations&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># If we were opened from a file then close it</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Shutdown process pool</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fp</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">space</span><span class="p">:</span> <span class="n">DeviceSpace</span> <span class="o">=</span> <span class="s2">&quot;screen&quot;</span><span class="p">,</span>
        <span class="n">_boss_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">_boss_id</span><span class="p">:</span>
            <span class="c1"># Set this **right away** because it is needed to get</span>
            <span class="c1"># indirect object references right.</span>
            <span class="n">_set_document</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_boss_id</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">in_worker</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">XRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">=</span> <span class="n">space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DecipherCallable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_objs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">],</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">object</span><span class="p">,</span> <span class="n">Font</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">TextIOBase</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;fp is not a binary file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">_open_input</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_printable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_modifiable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_extractable</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Getting the XRef table and trailer is done non-lazily</span>
        <span class="c1"># because they contain encryption information among other</span>
        <span class="c1"># things.  As noted above we don&#39;t try to look for the first</span>
        <span class="c1"># page cross-reference table (for linearized PDFs) after the</span>
        <span class="c1"># header, it will instead be loaded with all the rest.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">IndirectObjectParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xrefpos</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xrefs</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Failed to parse xref table, falling back to object parser: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">e</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">newxref</span> <span class="o">=</span> <span class="n">XRefFallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newxref</span><span class="p">)</span>
        <span class="c1"># Now find the trailer</span>
        <span class="k">for</span> <span class="n">xref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
            <span class="n">trailer</span> <span class="o">=</span> <span class="n">xref</span><span class="o">.</span><span class="n">trailer</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">trailer</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># If there&#39;s an encryption info, remember it.</span>
            <span class="k">if</span> <span class="s2">&quot;Encrypt&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;ID&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
                    <span class="n">id_value</span> <span class="o">=</span> <span class="n">list_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Some documents may not have a /ID, use two empty</span>
                    <span class="c1"># byte strings instead. Solves</span>
                    <span class="c1"># https://github.com/pdfminer/pdfminer.six/issues/594</span>
                    <span class="n">id_value</span> <span class="o">=</span> <span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span> <span class="o">=</span> <span class="p">(</span><span class="n">id_value</span><span class="p">,</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;Encrypt&quot;</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;Info&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dict_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;Info&quot;</span><span class="p">]))</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Info is a broken reference (incorrect xref table?)&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;Root&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
                <span class="c1"># Every PDF file must have exactly one /Root dictionary.</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;Root&quot;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Root is a broken reference (incorrect xref table?)&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No /Root object! - Is this really a PDF?&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">LITERAL_CATALOG</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Catalog not found!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;Version&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Using PDF version </span><span class="si">%r</span><span class="s2"> from catalog instead of </span><span class="si">%r</span><span class="s2"> from header&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Version&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf_version</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf_version</span> <span class="o">=</span> <span class="n">literal_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Version&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_tagged</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">markinfo</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MarkInfo&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markinfo</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_tagged</span> <span class="o">=</span> <span class="ow">not</span> <span class="ow">not</span> <span class="n">markinfo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Marked&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_read_xrefs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xrefpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_xref</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="s2">&quot;No xref table found at end of file&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">xrefpos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">xrefpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detect_concatenation</span><span class="p">(</span><span class="n">xrefpos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xrefpos</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="s2">&quot;Failed to read xref table at end of file&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">xrefpos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;Failed to read xref table with adjusted offset&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_detect_concatenation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xrefpos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Detect the case where two (or more) PDFs have been</span>
        <span class="c1"># concatenated, or where somebody tried an &quot;incremental</span>
        <span class="c1"># update&quot; without updating the xref table</span>
        <span class="n">filestart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="si">%%</span><span class="s2">EOF&quot;</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found ultimate </span><span class="si">%%</span><span class="s2">EOF at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filestart</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filestart</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">filestart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="si">%%</span><span class="s2">EOF&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">filestart</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found penultimate </span><span class="si">%%</span><span class="s2">EOF at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filestart</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filestart</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">filestart</span> <span class="o">+=</span> <span class="mi">5</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="n">filestart</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
                <span class="n">filestart</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">filestart</span> <span class="o">+</span> <span class="n">xrefpos</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected EOF at </span><span class="si">{start}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_XREF</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Found two PDFs in a trenchcoat at </span><span class="si">%d</span><span class="s2"> (second xref is at </span><span class="si">%d</span><span class="s2"> not </span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="n">filestart</span><span class="p">,</span>
                    <span class="n">pos</span><span class="p">,</span>
                    <span class="n">xrefpos</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">filestart</span>
                <span class="k">return</span> <span class="n">pos</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_initialize_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the decryption handler with a given password, if any.</span>

<span class="sd">        Internal function, requires the Encrypt dictionary to have</span>
<span class="sd">        been read from the trailer into self.encryption.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">(</span><span class="n">docid</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span>
        <span class="k">if</span> <span class="n">literal_name</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Filter&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="s2">&quot;Standard&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unknown filter: param=</span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># 3 (PDF 1.4) An unpublished algorithm that permits encryption</span>
        <span class="c1"># key lengths ranging from 40 to 128 bits. This value shall</span>
        <span class="c1"># not appear in a conforming PDF file.</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unpublished algorithm 3 not supported&quot;</span><span class="p">)</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="n">SECURITY_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="c1"># 0 An algorithm that is undocumented. This value shall not be used.</span>
        <span class="k">if</span> <span class="n">factory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unknown algorithm: param=</span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param</span><span class="p">)</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="n">docid</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">decrypt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_printable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_printable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_modifiable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_modifiable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_extractable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_extractable</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="c1"># Ensure that no extra data leaks into encrypted streams</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">strict</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">decipher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">IndirectObject</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over top-level `IndirectObject` (does not expand object streams)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">obj</span>
            <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">IndirectObjectParser</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">strict</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">IndirectObject</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over all indirect objects (including, then expanding object</span>
<span class="sd">        streams)&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">IndirectObjectParser</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">strict</span>
        <span class="p">):</span>
            <span class="k">yield</span> <span class="n">obj</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LITERAL_OBJSTM</span>
            <span class="p">):</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="n">ObjectStreamParser</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">spos</span><span class="p">,</span> <span class="n">sobj</span> <span class="ow">in</span> <span class="n">parser</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">sobj</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over tokens.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">tok</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">tok</span> <span class="ow">in</span> <span class="n">Lexer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tree</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Logical structure of this document, if any.</span>

<span class="sd">        In the case where no logical structure tree exists, this will</span>
<span class="sd">        be `None`.  Otherwise you may iterate over it, search it, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;StructTreeRoot&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">Tree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">NumberTree</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parent tree of this document.</span>

<span class="sd">        This is a somewhat obscure data structure that links marked</span>
<span class="sd">        content sections to their corresponding structure elements.</span>
<span class="sd">        If you don&#39;t know what that means, you probably don&#39;t need it,</span>
<span class="sd">        but if you do, here it is.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;StructTreeRoot&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">st</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;StructTreeRoot&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;ParentTree&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">NumberTree</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="s2">&quot;ParentTree&quot;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_getobj_objstm</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">stream</span><span class="o">.</span><span class="n">objid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_objs</span><span class="p">:</span>
            <span class="p">(</span><span class="n">objs</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_objs</span><span class="p">[</span><span class="n">stream</span><span class="o">.</span><span class="n">objid</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">objs</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_objects</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">stream</span><span class="o">.</span><span class="n">objid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_objs</span><span class="p">[</span><span class="n">stream</span><span class="o">.</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">objs</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">index</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">objs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="s2">&quot;index too big: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">LITERAL_OBJSTM</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Content stream Type is not /ObjStm: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">stream</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;N&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;N is not defined in content stream: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">stream</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;N is invalid in content stream: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">stream</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">objs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">parser</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">objs</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_getobj_parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">objid</span> <span class="o">!=</span> <span class="n">objid</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;objid mismatch: </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">objid</span><span class="si">!r}</span><span class="s2">=</span><span class="si">{</span><span class="n">objid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Indirect object </span><span class="si">%d</span><span class="s2"> not found at position </span><span class="si">%d</span><span class="s2">: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objid</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">e</span>
            <span class="p">)</span>
            <span class="c1"># In case of malformed pdf files where the offset in the</span>
            <span class="c1"># xref table doesn&#39;t point exactly at the object</span>
            <span class="c1"># definition (probably more frequent than you think), just</span>
            <span class="c1"># use a regular expression to find the object because we</span>
            <span class="c1"># can do that.</span>
            <span class="n">realpos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">lastgen</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="sa">rb</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">\s+(\d+)\s+obj&quot;</span> <span class="o">%</span> <span class="n">objid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
                <span class="n">genno</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">genno</span> <span class="o">&gt;</span> <span class="n">lastgen</span><span class="p">:</span>
                    <span class="n">lastgen</span> <span class="o">=</span> <span class="n">genno</span>
                    <span class="n">realpos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">realpos</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Indirect object </span><span class="si">{</span><span class="n">objid</span><span class="si">!r}</span><span class="s2"> not found in document&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">realpos</span><span class="p">)</span>
            <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">objid</span> <span class="o">!=</span> <span class="n">objid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;objid mismatch: </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">objid</span><span class="si">!r}</span><span class="s2">=</span><span class="si">{</span><span class="n">objid</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">obj</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an indirect object from the PDF.</span>

<span class="sd">        Note that the behaviour in the case of a non-existent object</span>
<span class="sd">        (raising `IndexError`), while Pythonic, is not PDFic, as PDF</span>
<span class="sd">        1.7 sec 7.3.10 states:</span>

<span class="sd">        &gt; An indirect reference to an undefined object shall not be</span>
<span class="sd">        considered an error by a conforming reader; it shall be</span>
<span class="sd">        treated as a reference to the null object.</span>

<span class="sd">        Raises:</span>
<span class="sd">          ValueError: if Document is not initialized</span>
<span class="sd">          IndexError: if objid does not exist in PDF</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Document is not initialized&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">objid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">xref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="p">(</span><span class="n">strmid</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">genno</span><span class="p">)</span> <span class="o">=</span> <span class="n">xref</span><span class="o">.</span><span class="n">get_pos</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">strmid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">stream</span> <span class="o">=</span> <span class="n">stream_value</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">strmid</span><span class="p">])</span>
                        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getobj_objstm</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getobj_parse</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="c1"># FIXME: We might not actually want to catch these...</span>
                <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;EOF when searching for object </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">except</span> <span class="n">PDFSyntaxError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Syntax error when searching for object </span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objid</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Object with ID </span><span class="si">{</span><span class="n">objid</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">spec</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">],</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Font</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">objid</span> <span class="ow">and</span> <span class="n">objid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="n">Font</span><span class="p">({},</span> <span class="p">{})</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>
        <span class="c1"># Create a Font object, hopefully</span>
        <span class="n">font</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Font</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">LITERAL_FONT</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Font Type is not /Font: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
        <span class="n">subtype</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Subtype&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subtype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">LITERAL_TYPE1</span><span class="p">,</span> <span class="n">LITERAL_MMTYPE1</span><span class="p">):</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">Type1Font</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">subtype</span> <span class="ow">is</span> <span class="n">LITERAL_TRUETYPE</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">TrueTypeFont</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">subtype</span> <span class="o">==</span> <span class="n">LITERAL_TYPE3</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">Type3Font</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">subtype</span> <span class="o">==</span> <span class="n">LITERAL_TYPE0</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;DescendantFonts&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">spec</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Type0 font has no DescendantFonts: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dfonts</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">spec</span><span class="p">[</span><span class="s2">&quot;DescendantFonts&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfonts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;Type 0 font should have 1 descendant, has more: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dfonts</span>
                    <span class="p">)</span>
                <span class="n">subspec</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">dfonts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subspec</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid descendant font: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">subspec</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">subspec</span> <span class="o">=</span> <span class="n">subspec</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="c1"># Merge the root and descendant font dictionaries</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Encoding&quot;</span><span class="p">,</span> <span class="s2">&quot;ToUnicode&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">spec</span><span class="p">:</span>
                            <span class="n">subspec</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="n">spec</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="n">CIDFont</span><span class="p">(</span><span class="n">subspec</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown Subtype in font: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">spec</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># We need a dummy font object to be able to do *something*</span>
            <span class="c1"># (even if it&#39;s the wrong thing) with text objects.</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">Font</span><span class="p">({},</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">objid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cached_fonts</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="n">font</span>
        <span class="k">return</span> <span class="n">font</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">outline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Outline</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Document outline, if any.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;Outlines&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outline</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_outline</span> <span class="o">=</span> <span class="n">Outline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid Outlines entry in catalog: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Outlines&quot;</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outline</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate page label strings for the PDF document.</span>

<span class="sd">        If the document includes page labels, generates strings, one per page.</span>
<span class="sd">        If not, raise KeyError.</span>

<span class="sd">        The resulting iterator is unbounded (because the page label</span>
<span class="sd">        tree does not actually include all the pages), so it is</span>
<span class="sd">        recommended to use `pages` instead.</span>

<span class="sd">        Raises:</span>
<span class="sd">          KeyError: No page labels are present in the catalog</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>  <span class="c1"># really it cannot be None</span>

        <span class="n">page_labels</span> <span class="o">=</span> <span class="n">PageLabels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;PageLabels&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">page_labels</span><span class="o">.</span><span class="n">labels</span>

    <span class="n">PageType</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_pages_from_xrefs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">PageType</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find pages from the cross-reference tables if the page tree</span>
<span class="sd">        is missing (note that this only happens in invalid PDFs, but</span>
<span class="sd">        it happens.)</span>

<span class="sd">        Returns:</span>
<span class="sd">          an iterator over (objid, dict) pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">xref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">object_id</span> <span class="ow">in</span> <span class="n">xref</span><span class="o">.</span><span class="n">objids</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">object_id</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LITERAL_PAGE</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">obj</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_page_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">PageType</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over the flattened page tree in reading order, propagating</span>
<span class="sd">        inheritable attributes.  Returns an iterator over (objid, dict) pairs.</span>

<span class="sd">        Raises:</span>
<span class="sd">          KeyError: if there is no page tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;Pages&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No &#39;Pages&#39; entry in catalog&quot;</span><span class="p">)</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Pages&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">)]</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
            <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
                <span class="c1"># The PDF specification *requires* both the Pages</span>
                <span class="c1"># element of the catalog and the entries in Kids in</span>
                <span class="c1"># the page tree to be indirect references.</span>
                <span class="n">object_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">objid</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="c1"># Should not happen in a valid PDF, but probably does?</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page tree contains bare integer: </span><span class="si">%r</span><span class="s2"> in </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
                <span class="n">object_id</span> <span class="o">=</span> <span class="n">obj</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page tree contains unknown object: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="n">page_object</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">object_id</span><span class="p">])</span>

            <span class="c1"># Avoid recursion errors by keeping track of visited nodes</span>
            <span class="c1"># (again, this should never actually happen in a valid PDF)</span>
            <span class="k">if</span> <span class="n">object_id</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Circular reference </span><span class="si">%r</span><span class="s2"> in page tree&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">object_id</span><span class="p">)</span>

            <span class="c1"># Propagate inheritable attributes</span>
            <span class="n">object_properties</span> <span class="o">=</span> <span class="n">page_object</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">INHERITABLE_PAGE_ATTRS</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">object_properties</span><span class="p">:</span>
                    <span class="n">object_properties</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

            <span class="c1"># Recurse, depth-first</span>
            <span class="n">object_type</span> <span class="o">=</span> <span class="n">object_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page has no Type, trying type: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">object_properties</span><span class="p">)</span>
                <span class="n">object_type</span> <span class="o">=</span> <span class="n">object_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="n">LITERAL_PAGES</span> <span class="ow">and</span> <span class="s2">&quot;Kids&quot;</span> <span class="ow">in</span> <span class="n">object_properties</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">list_value</span><span class="p">(</span><span class="n">object_properties</span><span class="p">[</span><span class="s2">&quot;Kids&quot;</span><span class="p">])):</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">child</span><span class="p">,</span> <span class="n">object_properties</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="n">LITERAL_PAGE</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">object_properties</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PageList&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pages of the document as an iterable/addressable `PageList` object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span> <span class="o">=</span> <span class="n">PageList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PDF name dictionary (PDF 1.7 sec 7.7.4).</span>

<span class="sd">        Raises:</span>
<span class="sd">          KeyError: if nonexistent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Names&quot;</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">destinations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Destinations&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Named destinations as an iterable/addressable `Destinations` object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destinations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_destinations</span> <span class="o">=</span> <span class="n">Destinations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destinations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_find_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal function used to locate the first XRef.&quot;&quot;&quot;</span>
        <span class="c1"># search the last xref table by scanning the file backwards.</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reverse_iter_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;startxref&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prev</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid startxref position: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prev</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="n">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">start</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid negative startxref position: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">start</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="n">pos</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;Invalid startxref position (&gt; </span><span class="si">%d</span><span class="s2">): </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
            <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;xref&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">pos</span>
            <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;endobj&quot;</span><span class="p">:</span>
                <span class="c1"># Okay, we&#39;re probably not in Kansas anymore...</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">prev</span> <span class="o">=</span> <span class="n">line</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No xref table found at end of file&quot;</span><span class="p">)</span>

    <span class="c1"># read xref table</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_read_xref_from</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">xrefs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">XRef</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reads XRefs from the given location.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xrefpos</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Detected circular xref chain at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected EOF at </span><span class="si">{start}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_XREF</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
            <span class="n">xref</span><span class="p">:</span> <span class="n">XRef</span> <span class="o">=</span> <span class="n">XRefTable</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># It might be an XRefStream, if this is an indirect object...</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_OBJ</span><span class="p">:</span>
                <span class="c1"># XRefStream: PDF-1.5</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
                <span class="n">xref</span> <span class="o">=</span> <span class="n">XRefStream</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Well, maybe it&#39;s an XRef table without &quot;xref&quot; (but</span>
                <span class="c1"># probably not)</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">xref</span> <span class="o">=</span> <span class="n">XRefTable</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xrefpos</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">xrefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xref</span><span class="p">)</span>
        <span class="n">trailer</span> <span class="o">=</span> <span class="n">xref</span><span class="o">.</span><span class="n">trailer</span>
        <span class="c1"># For hybrid-reference files, an additional set of xrefs as a</span>
        <span class="c1"># stream.</span>
        <span class="k">if</span> <span class="s2">&quot;XRefStm&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;XRefStm&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">xrefs</span><span class="p">)</span>
        <span class="c1"># Recurse into any previous xref tables or streams</span>
        <span class="k">if</span> <span class="s2">&quot;Prev&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
            <span class="c1"># find previous xref</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;Prev&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">xrefs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.destinations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">destinations</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Named destinations as an iterable/addressable <code>Destinations</code> object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>PDF name dictionary (PDF 1.7 sec 7.7.4).</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if nonexistent.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">objects</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over all indirect objects (including, then expanding object
streams)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.outline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">outline</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Document outline, if any.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.page_labels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page_labels</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generate page label strings for the PDF document.</p>
<p>If the document includes page labels, generates strings, one per page.
If not, raise KeyError.</p>
<p>The resulting iterator is unbounded (because the page label
tree does not actually include all the pages), so it is
recommended to use <code>pages</code> instead.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>No page labels are present in the catalog</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.pages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pages</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Pages of the document as an iterable/addressable <code>PageList</code> object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.parent_tree" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parent_tree</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Parent tree of this document.</p>
<p>This is a somewhat obscure data structure that links marked
content sections to their corresponding structure elements.
If you don't know what that means, you probably don't need it,
but if you do, here it is.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.structure" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">structure</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Logical structure of this document, if any.</p>
<p>In the case where no logical structure tree exists, this will
be <code>None</code>.  Otherwise you may iterate over it, search it, etc.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.document.Document.tokens" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tokens</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over tokens.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.document.Document.__getitem__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get an indirect object from the PDF.</p>
<p>Note that the behaviour in the case of a non-existent object
(raising <code>IndexError</code>), while Pythonic, is not PDFic, as PDF
1.7 sec 7.3.10 states:</p>
<blockquote>
<p>An indirect reference to an undefined object shall not be
considered an error by a conforming reader; it shall be
treated as a reference to the null object.</p>
</blockquote>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if Document is not initialized</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="IndexError">IndexError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if objid does not exist in PDF</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an indirect object from the PDF.</span>

<span class="sd">    Note that the behaviour in the case of a non-existent object</span>
<span class="sd">    (raising `IndexError`), while Pythonic, is not PDFic, as PDF</span>
<span class="sd">    1.7 sec 7.3.10 states:</span>

<span class="sd">    &gt; An indirect reference to an undefined object shall not be</span>
<span class="sd">    considered an error by a conforming reader; it shall be</span>
<span class="sd">    treated as a reference to the null object.</span>

<span class="sd">    Raises:</span>
<span class="sd">      ValueError: if Document is not initialized</span>
<span class="sd">      IndexError: if objid does not exist in PDF</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Document is not initialized&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">objid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">xref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="p">(</span><span class="n">strmid</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">genno</span><span class="p">)</span> <span class="o">=</span> <span class="n">xref</span><span class="o">.</span><span class="n">get_pos</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">strmid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">stream</span> <span class="o">=</span> <span class="n">stream_value</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">strmid</span><span class="p">])</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getobj_objstm</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getobj_parse</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="c1"># FIXME: We might not actually want to catch these...</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;EOF when searching for object </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="n">PDFSyntaxError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Syntax error when searching for object </span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">objid</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Object with ID </span><span class="si">{</span><span class="n">objid</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_objs</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over top-level <code>IndirectObject</code> (does not expand object streams)</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">IndirectObject</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over top-level `IndirectObject` (does not expand object streams)&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">obj</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">IndirectObjectParser</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">strict</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document._find_xref" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_find_xref</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Internal function used to locate the first XRef.</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_find_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Internal function used to locate the first XRef.&quot;&quot;&quot;</span>
    <span class="c1"># search the last xref table by scanning the file backwards.</span>
    <span class="n">prev</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reverse_iter_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;startxref&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prev</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid startxref position: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prev</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">start</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid negative startxref position: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">start</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="n">pos</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid startxref position (&gt; </span><span class="si">%d</span><span class="s2">): </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;xref&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pos</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;endobj&quot;</span><span class="p">:</span>
            <span class="c1"># Okay, we&#39;re probably not in Kansas anymore...</span>
            <span class="k">break</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">line</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No xref table found at end of file&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document._get_page_objects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_page_objects</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over the flattened page tree in reading order, propagating
inheritable attributes.  Returns an iterator over (objid, dict) pairs.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if there is no page tree.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_page_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">PageType</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over the flattened page tree in reading order, propagating</span>
<span class="sd">    inheritable attributes.  Returns an iterator over (objid, dict) pairs.</span>

<span class="sd">    Raises:</span>
<span class="sd">      KeyError: if there is no page tree.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;Pages&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No &#39;Pages&#39; entry in catalog&quot;</span><span class="p">)</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Pages&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">)]</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
        <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
            <span class="c1"># The PDF specification *requires* both the Pages</span>
            <span class="c1"># element of the catalog and the entries in Kids in</span>
            <span class="c1"># the page tree to be indirect references.</span>
            <span class="n">object_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">objid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># Should not happen in a valid PDF, but probably does?</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page tree contains bare integer: </span><span class="si">%r</span><span class="s2"> in </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
            <span class="n">object_id</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page tree contains unknown object: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
        <span class="n">page_object</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">object_id</span><span class="p">])</span>

        <span class="c1"># Avoid recursion errors by keeping track of visited nodes</span>
        <span class="c1"># (again, this should never actually happen in a valid PDF)</span>
        <span class="k">if</span> <span class="n">object_id</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Circular reference </span><span class="si">%r</span><span class="s2"> in page tree&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">object_id</span><span class="p">)</span>

        <span class="c1"># Propagate inheritable attributes</span>
        <span class="n">object_properties</span> <span class="o">=</span> <span class="n">page_object</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">INHERITABLE_PAGE_ATTRS</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">object_properties</span><span class="p">:</span>
                <span class="n">object_properties</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="c1"># Recurse, depth-first</span>
        <span class="n">object_type</span> <span class="o">=</span> <span class="n">object_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Page has no Type, trying type: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">object_properties</span><span class="p">)</span>
            <span class="n">object_type</span> <span class="o">=</span> <span class="n">object_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="n">LITERAL_PAGES</span> <span class="ow">and</span> <span class="s2">&quot;Kids&quot;</span> <span class="ow">in</span> <span class="n">object_properties</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">list_value</span><span class="p">(</span><span class="n">object_properties</span><span class="p">[</span><span class="s2">&quot;Kids&quot;</span><span class="p">])):</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">child</span><span class="p">,</span> <span class="n">object_properties</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">object_type</span> <span class="ow">is</span> <span class="n">LITERAL_PAGE</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">object_properties</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document._get_pages_from_xrefs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_get_pages_from_xrefs</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Find pages from the cross-reference tables if the page tree
is missing (note that this only happens in invalid PDFs, but
it happens.)</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Iterator">Iterator</span>[<span title="typing.Tuple">Tuple</span>[<span title="int">int</span>, <span title="playa.document.Document.PageType">PageType</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>an iterator over (objid, dict) pairs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_pages_from_xrefs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">PageType</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find pages from the cross-reference tables if the page tree</span>
<span class="sd">    is missing (note that this only happens in invalid PDFs, but</span>
<span class="sd">    it happens.)</span>

<span class="sd">    Returns:</span>
<span class="sd">      an iterator over (objid, dict) pairs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">xref</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrefs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">object_id</span> <span class="ow">in</span> <span class="n">xref</span><span class="o">.</span><span class="n">objids</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">object_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LITERAL_PAGE</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">obj</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document._initialize_password" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_initialize_password</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the decryption handler with a given password, if any.</p>
<p>Internal function, requires the Encrypt dictionary to have
been read from the trailer into self.encryption.</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_initialize_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the decryption handler with a given password, if any.</span>

<span class="sd">    Internal function, requires the Encrypt dictionary to have</span>
<span class="sd">    been read from the trailer into self.encryption.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">(</span><span class="n">docid</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encryption</span>
    <span class="k">if</span> <span class="n">literal_name</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Filter&quot;</span><span class="p">))</span> <span class="o">!=</span> <span class="s2">&quot;Standard&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unknown filter: param=</span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param</span><span class="p">)</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="c1"># 3 (PDF 1.4) An unpublished algorithm that permits encryption</span>
    <span class="c1"># key lengths ranging from 40 to 128 bits. This value shall</span>
    <span class="c1"># not appear in a conforming PDF file.</span>
    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unpublished algorithm 3 not supported&quot;</span><span class="p">)</span>
    <span class="n">factory</span> <span class="o">=</span> <span class="n">SECURITY_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="c1"># 0 An algorithm that is undocumented. This value shall not be used.</span>
    <span class="k">if</span> <span class="n">factory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PDFEncryptionError</span><span class="p">(</span><span class="s2">&quot;Unknown algorithm: param=</span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param</span><span class="p">)</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="n">docid</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">decrypt</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_printable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_printable</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_modifiable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_modifiable</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_extractable</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">is_extractable</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="c1"># Ensure that no extra data leaks into encrypted streams</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">strict</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">decipher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.Document._read_xref_from" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">xrefs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reads XRefs from the given location.</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_read_xref_from</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">xrefs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">XRef</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads XRefs from the given location.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">start</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xrefpos</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Detected circular xref chain at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected EOF at </span><span class="si">{start}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_XREF</span><span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
        <span class="n">xref</span><span class="p">:</span> <span class="n">XRef</span> <span class="o">=</span> <span class="n">XRefTable</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># It might be an XRefStream, if this is an indirect object...</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_OBJ</span><span class="p">:</span>
            <span class="c1"># XRefStream: PDF-1.5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="n">xref</span> <span class="o">=</span> <span class="n">XRefStream</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Well, maybe it&#39;s an XRef table without &quot;xref&quot; (but</span>
            <span class="c1"># probably not)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="n">xref</span> <span class="o">=</span> <span class="n">XRefTable</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_xrefpos</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="n">xrefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xref</span><span class="p">)</span>
    <span class="n">trailer</span> <span class="o">=</span> <span class="n">xref</span><span class="o">.</span><span class="n">trailer</span>
    <span class="c1"># For hybrid-reference files, an additional set of xrefs as a</span>
    <span class="c1"># stream.</span>
    <span class="k">if</span> <span class="s2">&quot;XRefStm&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;XRefStm&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">xrefs</span><span class="p">)</span>
    <span class="c1"># Recurse into any previous xref tables or streams</span>
    <span class="k">if</span> <span class="s2">&quot;Prev&quot;</span> <span class="ow">in</span> <span class="n">trailer</span><span class="p">:</span>
        <span class="c1"># find previous xref</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">trailer</span><span class="p">[</span><span class="s2">&quot;Prev&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_xref_from</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">xrefs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.document.PageLabels" class="doc doc-heading">
            <code>PageLabels</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="playa.data_structures.NumberTree">NumberTree</span></code></p>


        <p>PageLabels from the document catalog.</p>
<p>See Section 12.4.2 in the PDF 1.7 Reference.</p>







              <details class="quote">
                <summary>Source code in <code>playa/document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PageLabels</span><span class="p">(</span><span class="n">NumberTree</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PageLabels from the document catalog.</span>

<span class="sd">    See Section 12.4.2 in the PDF 1.7 Reference.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">itor</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">label_dict_unchecked</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">itor</span><span class="p">)</span>
            <span class="c1"># The tree must begin with page index 0</span>
            <span class="k">if</span> <span class="n">start</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;PageLabels tree is missing page index 0&quot;</span><span class="p">)</span>
                <span class="c1"># Try to cope, by assuming empty labels for the initial pages</span>
                <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;PageLabels tree is empty&quot;</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">label_dict_unchecked</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># forever!</span>
            <span class="n">label_dict</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">label_dict_unchecked</span><span class="p">)</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">label_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">)</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">str_value</span><span class="p">(</span><span class="n">label_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)))</span>
            <span class="n">first_value</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">label_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;St&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">next_start</span><span class="p">,</span> <span class="n">label_dict_unchecked</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">itor</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="c1"># This is the last specified range. It continues until the end</span>
                <span class="c1"># of the document.</span>
                <span class="n">values</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">first_value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">range_length</span> <span class="o">=</span> <span class="n">next_start</span> <span class="o">-</span> <span class="n">start</span>
                <span class="n">values</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">first_value</span><span class="p">,</span> <span class="n">first_value</span> <span class="o">+</span> <span class="n">range_length</span><span class="p">)</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">next_start</span>

            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_page_label</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">label</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_format_page_label</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format page label value in a specific style&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">):</span>  <span class="c1"># Decimal arabic numerals</span>
            <span class="n">label</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">):</span>  <span class="c1"># Uppercase roman numerals</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_roman</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">):</span>  <span class="c1"># Lowercase roman numerals</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_roman</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">):</span>  <span class="c1"># Uppercase letters A-Z, AA-ZZ...</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_alpha</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">):</span>  <span class="c1"># Lowercase letters a-z, aa-zz...</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_alpha</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown page label style: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">label</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="playa.document.PageLabels._format_page_label" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_format_page_label</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Format page label value in a specific style</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_format_page_label</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Format page label value in a specific style&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">):</span>  <span class="c1"># Decimal arabic numerals</span>
        <span class="n">label</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">):</span>  <span class="c1"># Uppercase roman numerals</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_roman</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">):</span>  <span class="c1"># Lowercase roman numerals</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_roman</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">):</span>  <span class="c1"># Uppercase letters A-Z, AA-ZZ...</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_alpha</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">style</span> <span class="ow">is</span> <span class="n">LIT</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">):</span>  <span class="c1"># Lowercase letters a-z, aa-zz...</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">format_int_alpha</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown page label style: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="n">label</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.document.PageList" class="doc doc-heading">
            <code>PageList</code>


</h3>


    <div class="doc doc-contents ">


        <p>List of pages indexable by 0-based index or string label.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.document.PageList.have_labels">have_labels</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If pages have explicit labels in the PDF.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/document.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PageList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;List of pages indexable by 0-based index or string label.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        have_labels: If pages have explicit labels in the PDF.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">have_labels</span><span class="p">:</span> <span class="nb">bool</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="n">Document</span><span class="p">,</span> <span class="n">pages</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="n">Page</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="o">=</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Page</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">page</span><span class="o">.</span><span class="n">label</span><span class="p">:</span> <span class="n">page</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages</span> <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">have_labels</span> <span class="o">=</span> <span class="ow">not</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_pages</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_init_pages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">page_labels</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">page_labels</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">have_labels</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="n">page_labels</span> <span class="o">=</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">have_labels</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objids</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">page_objects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_get_page_objects</span><span class="p">())</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">page_objects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_get_pages_from_xrefs</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">page_idx</span><span class="p">,</span> <span class="p">((</span><span class="n">objid</span><span class="p">,</span> <span class="n">properties</span><span class="p">),</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="n">page_objects</span><span class="p">,</span> <span class="n">page_labels</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">objid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">page_idx</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">space</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objids</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>
            <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Duplicate page label </span><span class="si">%s</span><span class="s2"> at index </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">page_idx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Page</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">slice</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PageList&quot;</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;PageList&quot;</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="s2">&quot;PageList&quot;</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">PageList</span><span class="p">(</span><span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PageList</span><span class="p">(</span><span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">key</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a page by its indirect object ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            objid: Indirect object ID for the page object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the page in question.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objids</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Page</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply a function over each page, iterating over its results.</span>

<span class="sd">        Args:</span>
<span class="sd">            func: The function to apply to each page.</span>

<span class="sd">        Note:</span>
<span class="sd">            This possibly runs `func` in a separate process.  If its</span>
<span class="sd">            return value is not serializable (by `pickle`) then you</span>
<span class="sd">            will encounter errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">_pool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">doc</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="n">call_page</span><span class="p">,</span>
                <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">func</span><span class="p">),</span>
                <span class="p">((</span><span class="nb">id</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span> <span class="n">page</span><span class="o">.</span><span class="n">page_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.document.PageList.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.document.PageList.by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">by_id</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a page by its indirect object ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>objid</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indirect object ID for the page object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (playa.page.Page)" href="#playa.page.Page">Page</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the page in question.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a page by its indirect object ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        objid: Indirect object ID for the page object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the page in question.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objids</span><span class="p">[</span><span class="n">objid</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.document.PageList.map" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">map</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Apply a function over each page, iterating over its results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="Page (playa.page.Page)" href="#playa.page.Page">Page</a>], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to apply to each page.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>This possibly runs <code>func</code> in a separate process.  If its
return value is not serializable (by <code>pickle</code>) then you
will encounter errors.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Page</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply a function over each page, iterating over its results.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function to apply to each page.</span>

<span class="sd">    Note:</span>
<span class="sd">        This possibly runs `func` in a separate process.  If its</span>
<span class="sd">        return value is not serializable (by `pickle`) then you</span>
<span class="sd">        will encounter errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">_pool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">doc</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="n">call_page</span><span class="p">,</span>
            <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">func</span><span class="p">),</span>
            <span class="p">((</span><span class="nb">id</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span> <span class="n">page</span><span class="o">.</span><span class="n">page_idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="playa.document.call_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">call_page</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">pageref</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Call a function on a page in a worker process.</p>


            <details class="quote">
              <summary>Source code in <code>playa/document.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">call_page</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Page</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span> <span class="n">pageref</span><span class="p">:</span> <span class="n">PageRef</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call a function on a page in a worker process.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">_deref_page</span><span class="p">(</span><span class="n">pageref</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.page" class="doc doc-heading">
            <code>playa.page</code>


</h2>

    <div class="doc doc-contents first">

        <p>Classes for looking at pages and their contents.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="playa.page.Annotation" class="doc doc-heading">
            <code>Annotation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>PDF annotation (PDF 1.7 section 12.5).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Annotation.subtype">subtype</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of annotation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Annotation.rect">rect</span></code></td>
            <td>
                  <code><span title="playa.utils.Rect">Rect</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Annotation rectangle (location on page) in <em>default user space</em></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Annotation.bbox">bbox</span></code></td>
            <td>
                  <code><span title="playa.utils.Rect">Rect</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Annotation rectangle in <em>device space</em></p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Annotation.props">props</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="playa.parser.PDFObject">PDFObject</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Annotation dictionary containing all other properties
     (PDF 1.7 sec. 12.5.2).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Annotation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF annotation (PDF 1.7 section 12.5).</span>

<span class="sd">    Attributes:</span>
<span class="sd">      subtype: Type of annotation.</span>
<span class="sd">      rect: Annotation rectangle (location on page) in *default user space*</span>
<span class="sd">      bbox: Annotation rectangle in *device space*</span>
<span class="sd">      props: Annotation dictionary containing all other properties</span>
<span class="sd">             (PDF 1.7 sec. 12.5.2).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_pageref</span><span class="p">:</span> <span class="n">PageRef</span>
    <span class="n">subtype</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">rect</span><span class="p">:</span> <span class="n">Rect</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">PDFObject</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">:</span>
        <span class="n">annot</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">subtype</span> <span class="o">=</span> <span class="n">annot</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Subtype&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subtype</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subtype</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="s2">&quot;Invalid annotation Subtype </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">subtype</span><span class="p">,))</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">parse_rect</span><span class="p">(</span><span class="n">annot</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rect&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Annotation</span><span class="p">(</span>
            <span class="n">_pageref</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">pageref</span><span class="p">,</span>
            <span class="n">subtype</span><span class="o">=</span><span class="n">literal_name</span><span class="p">(</span><span class="n">subtype</span><span class="p">),</span>
            <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span>
            <span class="n">props</span><span class="o">=</span><span class="n">annot</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Containing page for this annotation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">contents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Text contents of annotation.&quot;&quot;&quot;</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Contents&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">contents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid annotation contents: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Annotation name, uniquely identifying this annotation.&quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NM&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String describing date and time when annotation was most recently</span>
<span class="sd">        modified.</span>

<span class="sd">        The date *should* be in the format `D:YYYYMMDDHHmmSSOHH&#39;mm`</span>
<span class="sd">        but this is in no way required (and unlikely to be implemented</span>
<span class="sd">        consistently, if history is any guide).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mtime</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">mtime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">mtime</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Annotation.contents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">contents</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Text contents of annotation.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Annotation.mtime" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mtime</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>String describing date and time when annotation was most recently
modified.</p>
<p>The date <em>should</em> be in the format <code>D:YYYYMMDDHHmmSSOHH'mm</code>
but this is in no way required (and unlikely to be implemented
consistently, if history is any guide).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Annotation.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Annotation name, uniquely identifying this annotation.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Annotation.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Containing page for this annotation.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.ContentObject" class="doc doc-heading">
            <code>ContentObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>Any sort of content object.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ContentObject.gstate">gstate</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="GraphicState


  
      dataclass
   (playa.page.GraphicState)" href="#playa.page.GraphicState">GraphicState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Graphics state.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ContentObject.ctm">ctm</span></code></td>
            <td>
                  <code><span title="playa.utils.Matrix">Matrix</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Coordinate transformation matrix (PDF 1.7 section 8.3.2).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ContentObject.mcstack">mcstack</span></code></td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<a class="autorefs autorefs-internal" title="MarkedContent (playa.page.MarkedContent)" href="#playa.page.MarkedContent">MarkedContent</a>, ...]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Stack of enclosing marked content sections.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ContentObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Any sort of content object.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      gstate: Graphics state.</span>
<span class="sd">      ctm: Coordinate transformation matrix (PDF 1.7 section 8.3.2).</span>
<span class="sd">      mcstack: Stack of enclosing marked content sections.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_pageref</span><span class="p">:</span> <span class="n">PageRef</span>
    <span class="n">gstate</span><span class="p">:</span> <span class="n">GraphicState</span>
    <span class="n">ctm</span><span class="p">:</span> <span class="n">Matrix</span>
    <span class="n">mcstack</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">MarkedContent</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
        <span class="k">yield from</span> <span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of children of this object (generic implementation).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">object_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Type of this object as a string, e.g. &quot;text&quot;, &quot;path&quot;, &quot;image&quot;.&quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="n">name</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Object&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The bounding box in device space of this object.&quot;&quot;&quot;</span>
        <span class="c1"># These bboxes have already been computed in device space so</span>
        <span class="c1"># we don&#39;t need all 4 corners!</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span>
            <span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span> <span class="k">for</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="ow">in</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">bbox</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">get_bound</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mcs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">MarkedContent</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The immediately enclosing marked content section.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mcid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The marked content ID of the nearest enclosing marked</span>
<span class="sd">        content section with an ID.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">mcs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">mcs</span><span class="o">.</span><span class="n">mcid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">mcs</span><span class="o">.</span><span class="n">mcid</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The page containing this content object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ContentObject.bbox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bbox</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The bounding box in device space of this object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ContentObject.mcid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mcid</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The marked content ID of the nearest enclosing marked
content section with an ID.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ContentObject.mcs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mcs</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The immediately enclosing marked content section.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ContentObject.object_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">object_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Type of this object as a string, e.g. "text", "path", "image".</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ContentObject.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The page containing this content object.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.ContentObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the number of children of this object (generic implementation).</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the number of children of this object (generic implementation).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.DashPattern" class="doc doc-heading">
            <code>DashPattern</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.NamedTuple">NamedTuple</span></code></p>


        <p>Line dash pattern in PDF graphics state (PDF 1.7 section 8.4.3.6).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.DashPattern.dash">dash</span></code></td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, ...]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lengths of dashes and gaps in user space units</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.DashPattern.phase">phase</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>starting position in the dash pattern</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DashPattern</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Line dash pattern in PDF graphics state (PDF 1.7 section 8.4.3.6).</span>

<span class="sd">    Attributes:</span>
<span class="sd">      dash: lengths of dashes and gaps in user space units</span>
<span class="sd">      phase: starting position in the dash pattern</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dash</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="n">phase</span><span class="p">:</span> <span class="nb">float</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dash</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dash</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.GlyphObject" class="doc doc-heading">
            <code>GlyphObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>Individual glyph on the page.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.textstate">textstate</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TextState


  
      dataclass
   (playa.page.TextState)" href="#playa.page.TextState">TextState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text state for this glyph.  This is a <strong>mutable</strong>
object and you should not expect it to be valid outside the
context of iteration over the parent <code>TextObject</code>.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.cid">cid</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Character ID for this glyph.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.text">text</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unicode mapping of this glyph, if any.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.adv">adv</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>glyph displacement in text space units (horizontal or vertical,
   depending on the writing direction).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.matrix">matrix</span></code></td>
            <td>
                  <code><span title="playa.utils.Matrix">Matrix</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>rendering matrix for this glyph, which transforms text
      space (<em>not glyph space!</em>) coordinates to device space.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.bbox">bbox</span></code></td>
            <td>
                  <code><span title="playa.utils.Rect">Rect</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>glyph bounding box in device space.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.text_space_bbox">text_space_bbox</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>glyph bounding box in text space (i.e. before
               any possible coordinate transformation)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GlyphObject.corners">corners</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Is the transformed bounding box rotated or skewed such
       that all four corners need to be calculated (derived
       from matrix but precomputed for speed)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GlyphObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Individual glyph on the page.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      textstate: Text state for this glyph.  This is a **mutable**</span>
<span class="sd">        object and you should not expect it to be valid outside the</span>
<span class="sd">        context of iteration over the parent `TextObject`.</span>
<span class="sd">      cid: Character ID for this glyph.</span>
<span class="sd">      text: Unicode mapping of this glyph, if any.</span>
<span class="sd">      adv: glyph displacement in text space units (horizontal or vertical,</span>
<span class="sd">           depending on the writing direction).</span>
<span class="sd">      matrix: rendering matrix for this glyph, which transforms text</span>
<span class="sd">              space (*not glyph space!*) coordinates to device space.</span>
<span class="sd">      bbox: glyph bounding box in device space.</span>
<span class="sd">      text_space_bbox: glyph bounding box in text space (i.e. before</span>
<span class="sd">                       any possible coordinate transformation)</span>
<span class="sd">      corners: Is the transformed bounding box rotated or skewed such</span>
<span class="sd">               that all four corners need to be calculated (derived</span>
<span class="sd">               from matrix but precomputed for speed)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">textstate</span><span class="p">:</span> <span class="n">TextState</span>
    <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">text</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">matrix</span><span class="p">:</span> <span class="n">Matrix</span>
    <span class="n">adv</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">corners</span><span class="p">:</span> <span class="nb">bool</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fool! You cannot iterate over a GlyphObject!&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_space_bbox</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">corners</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">get_bound</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)),</span>
                    <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)),</span>
                    <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)),</span>
                    <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">)),</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="n">x0</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x0</span>
            <span class="k">if</span> <span class="n">y1</span> <span class="o">&lt;</span> <span class="n">y0</span><span class="p">:</span>
                <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y0</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text_space_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tstate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textstate</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">font</span>
        <span class="k">assert</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">font</span><span class="o">.</span><span class="n">vertical</span><span class="p">:</span>
            <span class="n">textdisp</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">char_disp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cid</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">textdisp</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="p">(</span><span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">)</span> <span class="o">=</span> <span class="n">textdisp</span>
            <span class="k">if</span> <span class="n">vx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">vx</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.5</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vx</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.001</span>
            <span class="n">vy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">-</span> <span class="n">vy</span><span class="p">)</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.001</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">vx</span><span class="p">,</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">adv</span><span class="p">)</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">vx</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tstate</span><span class="o">.</span><span class="n">descent</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span><span class="p">)</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">adv</span><span class="p">,</span> <span class="n">tstate</span><span class="o">.</span><span class="n">descent</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="playa.page.GlyphObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Fool! You cannot iterate over a GlyphObject!</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fool! You cannot iterate over a GlyphObject!&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.GraphicState" class="doc doc-heading">
            <code>GraphicState</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>PDF Graphics state (PDF 1.7 section 8.4)</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.linewidth">linewidth</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line width in user space units (sec. 8.4.3.2)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.linecap">linecap</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line cap style (sec. 8.4.3.3)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.linejoin">linejoin</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line join style (sec. 8.4.3.4)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.miterlimit">miterlimit</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum length of mitered line joins (sec. 8.4.3.5)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.dash">dash</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="DashPattern (playa.page.DashPattern)" href="#playa.page.DashPattern">DashPattern</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dash pattern for stroking (sec 8.4.3.6)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.intent">intent</span></code></td>
            <td>
                  <code><span title="playa.pdftypes.PSLiteral">PSLiteral</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rendering intent (sec. 8.6.5.8)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.flatness">flatness</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The precision with which curves shall be rendered on
the output device (sec. 10.6.2)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.scolor">scolor</span></code></td>
            <td>
                  <code><span title="playa.color.Color">Color</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colour used for stroking operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.scs">scs</span></code></td>
            <td>
                  <code><span title="playa.color.ColorSpace">ColorSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colour space used for stroking operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.ncolor">ncolor</span></code></td>
            <td>
                  <code><span title="playa.color.Color">Color</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colour used for non-stroking operations</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.GraphicState.ncs">ncs</span></code></td>
            <td>
                  <code><span title="playa.color.ColorSpace">ColorSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colour space used for non-stroking operations</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphicState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF Graphics state (PDF 1.7 section 8.4)</span>

<span class="sd">    Attributes:</span>
<span class="sd">      linewidth: Line width in user space units (sec. 8.4.3.2)</span>
<span class="sd">      linecap: Line cap style (sec. 8.4.3.3)</span>
<span class="sd">      linejoin: Line join style (sec. 8.4.3.4)</span>
<span class="sd">      miterlimit: Maximum length of mitered line joins (sec. 8.4.3.5)</span>
<span class="sd">      dash: Dash pattern for stroking (sec 8.4.3.6)</span>
<span class="sd">      intent: Rendering intent (sec. 8.6.5.8)</span>
<span class="sd">      flatness: The precision with which curves shall be rendered on</span>
<span class="sd">        the output device (sec. 10.6.2)</span>
<span class="sd">      scolor: Colour used for stroking operations</span>
<span class="sd">      scs: Colour space used for stroking operations</span>
<span class="sd">      ncolor: Colour used for non-stroking operations</span>
<span class="sd">      ncs: Colour space used for non-stroking operations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">linewidth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">linecap</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">linejoin</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">miterlimit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">dash</span><span class="p">:</span> <span class="n">DashPattern</span> <span class="o">=</span> <span class="n">SOLID_LINE</span>
    <span class="n">intent</span><span class="p">:</span> <span class="n">PSLiteral</span> <span class="o">=</span> <span class="n">LITERAL_RELATIVE_COLORIMETRIC</span>
    <span class="n">flatness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">scolor</span><span class="p">:</span> <span class="n">Color</span> <span class="o">=</span> <span class="n">BASIC_BLACK</span>
    <span class="n">scs</span><span class="p">:</span> <span class="n">ColorSpace</span> <span class="o">=</span> <span class="n">PREDEFINED_COLORSPACE</span><span class="p">[</span><span class="s2">&quot;DeviceGray&quot;</span><span class="p">]</span>
    <span class="n">ncolor</span><span class="p">:</span> <span class="n">Color</span> <span class="o">=</span> <span class="n">BASIC_BLACK</span>
    <span class="n">ncs</span><span class="p">:</span> <span class="n">ColorSpace</span> <span class="o">=</span> <span class="n">PREDEFINED_COLORSPACE</span><span class="p">[</span><span class="s2">&quot;DeviceGray&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.ImageObject" class="doc doc-heading">
            <code>ImageObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>An image (either inline or XObject).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.xobjid">xobjid</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of XObject (or None for inline images).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.srcsize">srcsize</span></code></td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size of source image in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.bits">bits</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of bits per component, if required (otherwise 1).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.imagemask">imagemask</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the image is a mask.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.stream">stream</span></code></td>
            <td>
                  <code><span title="playa.pdftypes.ContentStream">ContentStream</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content stream with image data.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.ImageObject.colorspace">colorspace</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="playa.color.ColorSpace">ColorSpace</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Colour space for this image, if required (otherwise
None).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ImageObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An image (either inline or XObject).</span>

<span class="sd">    Attributes:</span>
<span class="sd">      xobjid: Name of XObject (or None for inline images).</span>
<span class="sd">      srcsize: Size of source image in pixels.</span>
<span class="sd">      bits: Number of bits per component, if required (otherwise 1).</span>
<span class="sd">      imagemask: True if the image is a mask.</span>
<span class="sd">      stream: Content stream with image data.</span>
<span class="sd">      colorspace: Colour space for this image, if required (otherwise</span>
<span class="sd">        None).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">xobjid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">srcsize</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">bits</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">imagemask</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span>
    <span class="n">colorspace</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ColorSpace</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Even though you can __getitem__ from an image you cannot iterate</span>
<span class="sd">        over its keys, sorry about that.  Returns zero.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Binary stream content for this image&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">buffer</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
        <span class="c1"># PDF 1.7 sec 8.3.24: All images shall be 1 unit wide by 1</span>
        <span class="c1"># unit high in user space, regardless of the number of samples</span>
        <span class="c1"># in the image. To be painted, an image shall be mapped to a</span>
        <span class="c1"># region of the page by temporarily altering the CTM.</span>
        <span class="k">return</span> <span class="n">get_transformed_bound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.ImageObject.buffer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">buffer</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Binary stream content for this image</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.ImageObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Even though you can <strong>getitem</strong> from an image you cannot iterate
over its keys, sorry about that.  Returns zero.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Even though you can __getitem__ from an image you cannot iterate</span>
<span class="sd">    over its keys, sorry about that.  Returns zero.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.MarkedContent" class="doc doc-heading">
            <code>MarkedContent</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.NamedTuple">NamedTuple</span></code></p>


        <p>Marked content information for a point or section in a PDF page.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.MarkedContent.mcid">mcid</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="int">int</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Marked content section ID, or <code>None</code> for a marked content point.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.MarkedContent.tag">tag</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of tag for this marked content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.MarkedContent.props">props</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="playa.parser.PDFObject">PDFObject</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Marked content property dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MarkedContent</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Marked content information for a point or section in a PDF page.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      mcid: Marked content section ID, or `None` for a marked content point.</span>
<span class="sd">      tag: Name of tag for this marked content.</span>
<span class="sd">      props: Marked content property dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mcid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.Page" class="doc doc-heading">
            <code>Page</code>


</h3>


    <div class="doc doc-contents ">


        <p>An object that holds the information about a page.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>doc</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Document (playa.document.Document)" href="#playa.document.Document">Document</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a Document object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pageid</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the integer PDF object ID associated with the page in the page tree.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attrs</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a dictionary of page attributes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>page label string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>page_idx</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>0-based index of the page in the document.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>space</code>
            </td>
            <td>
                  <code><span title="playa.page.DeviceSpace">DeviceSpace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the device space to use for interpreting content</p>
              </div>
            </td>
            <td>
                  <code>&#39;screen&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.pageid">pageid</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the integer object ID associated with the page in the page tree</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.attrs">attrs</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a dictionary of page attributes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.resources">resources</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="playa.parser.PDFObject">PDFObject</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a dictionary of resources used by the page.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.mediabox">mediabox</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the physical size of the page.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.cropbox">cropbox</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the crop rectangle of the page.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.rotate">rotate</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the page rotation (in degree).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.label">label</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the page's label (typically, the logical page number).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.page_idx">page_idx</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>0-based index of the page in the document.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.Page.ctm">ctm</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>coordinate transformation matrix from default user space to
   page's device space</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Page</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An object that holds the information about a page.</span>

<span class="sd">    Args:</span>
<span class="sd">      doc: a Document object.</span>
<span class="sd">      pageid: the integer PDF object ID associated with the page in the page tree.</span>
<span class="sd">      attrs: a dictionary of page attributes.</span>
<span class="sd">      label: page label string.</span>
<span class="sd">      page_idx: 0-based index of the page in the document.</span>
<span class="sd">      space: the device space to use for interpreting content</span>

<span class="sd">    Attributes:</span>
<span class="sd">      pageid: the integer object ID associated with the page in the page tree</span>
<span class="sd">      attrs: a dictionary of page attributes.</span>
<span class="sd">      resources: a dictionary of resources used by the page.</span>
<span class="sd">      mediabox: the physical size of the page.</span>
<span class="sd">      cropbox: the crop rectangle of the page.</span>
<span class="sd">      rotate: the page rotation (in degree).</span>
<span class="sd">      label: the page&#39;s label (typically, the logical page number).</span>
<span class="sd">      page_idx: 0-based index of the page in the document.</span>
<span class="sd">      ctm: coordinate transformation matrix from default user space to</span>
<span class="sd">           page&#39;s device space</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span>
        <span class="n">pageid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">attrs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">page_idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">space</span><span class="p">:</span> <span class="n">DeviceSpace</span> <span class="o">=</span> <span class="s2">&quot;screen&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="o">=</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pageid</span> <span class="o">=</span> <span class="n">pageid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">attrs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_idx</span> <span class="o">=</span> <span class="n">page_idx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">=</span> <span class="n">space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pageref</span> <span class="o">=</span> <span class="n">_ref_page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastmod</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;LastModified&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Resources&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Resources missing or invalid from Page id </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pageid</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resources</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span> <span class="o">=</span> <span class="n">normalize_rect</span><span class="p">(</span><span class="n">parse_rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;MediaBox&quot;</span><span class="p">]))</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;MediaBox missing from Page id </span><span class="si">%d</span><span class="s2"> (and not inherited),&quot;</span>
                <span class="s2">&quot; defaulting to US Letter (612x792)&quot;</span><span class="p">,</span>
                <span class="n">pageid</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">612</span><span class="p">,</span> <span class="mi">792</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;MediaBox </span><span class="si">%r</span><span class="s2"> invalid in Page id </span><span class="si">%d</span><span class="s2">,&quot;</span>
                <span class="s2">&quot; defaulting to US Letter (612x792)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;MediaBox&quot;</span><span class="p">],</span>
                <span class="n">pageid</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">612</span><span class="p">,</span> <span class="mi">792</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cropbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span>
        <span class="k">if</span> <span class="s2">&quot;CropBox&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cropbox</span> <span class="o">=</span> <span class="n">normalize_rect</span><span class="p">(</span><span class="n">parse_rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;CropBox&quot;</span><span class="p">]))</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">):</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid CropBox </span><span class="si">%r</span><span class="s2"> in /Page, defaulting to MediaBox&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;CropBox&quot;</span><span class="p">],</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span> <span class="o">=</span> <span class="p">(</span><span class="n">int_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rotate&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">+</span> <span class="mi">360</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
        <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span>
        <span class="c1"># PDF 1.7 section 8.4.1: Initial value: a matrix that</span>
        <span class="c1"># transforms default user coordinates to device coordinates.</span>
        <span class="c1">#</span>
        <span class="c1"># We keep this as `self.ctm` in order to transform layout</span>
        <span class="c1"># attributes in tagged PDFs which are specified in default</span>
        <span class="c1"># user space (PDF 1.7 section 14.8.5.4.3, table 344)</span>
        <span class="c1">#</span>
        <span class="c1"># &quot;screen&quot; device space: origin is top left of MediaBox</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">==</span> <span class="s2">&quot;screen&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="n">x0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
        <span class="c1"># &quot;page&quot; device space: origin is bottom left of MediaBox</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">==</span> <span class="s2">&quot;page&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="n">x0</span><span class="p">,</span> <span class="o">-</span><span class="n">y0</span><span class="p">)</span>
        <span class="c1"># &quot;default&quot; device space: no transformation or rotation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span> <span class="o">!=</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown device space: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">space</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">MATRIX_IDENTITY</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># If rotation is requested, apply rotation to the initial ctm</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
            <span class="c1"># x&#39; = y</span>
            <span class="c1"># y&#39; = width - x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
            <span class="c1"># x&#39; = width - x</span>
            <span class="c1"># y&#39; = height - y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span> <span class="o">==</span> <span class="mi">270</span><span class="p">:</span>
            <span class="c1"># x&#39; = height - y</span>
            <span class="c1"># y&#39; = x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid /Rotate: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span><span class="p">)</span>

        <span class="n">contents</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Contents&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">contents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span> <span class="o">=</span> <span class="n">contents</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span> <span class="o">=</span> <span class="p">[</span><span class="n">contents</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;Annotation&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazily iterate over page annotations.&quot;&quot;&quot;</span>
        <span class="n">alist</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Annots&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">alist</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">alist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">Annotation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid object </span><span class="si">%r</span><span class="s2"> in Annots: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">streams</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">ContentStream</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return resolved content streams.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">stream_value</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Found non-stream in contents: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Width of the page in default user space units.&quot;&quot;&quot;</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span>
        <span class="k">return</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Width of the page in default user space units.&quot;&quot;&quot;</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span>
        <span class="k">return</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">contents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over PDF objects in the content streams.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">ContentParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">obj</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over lazy layout objects.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">LazyInterpreter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">paths</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;PathObject&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over lazy path objects.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">PathObject</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">images</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ImageObject&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over lazy image objects.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">ImageObject</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">texts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;TextObject&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over lazy text objects.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">TextObject</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">xobjects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;XObjectObject&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return resolved and rendered Form XObjects.</span>

<span class="sd">        This does *not* return any image or PostScript XObjects.  You</span>
<span class="sd">        can get images via the `images` property.  Apparently you</span>
<span class="sd">        aren&#39;t supposed to use PostScript XObjects for anything, ever.</span>

<span class="sd">        Note that these are the XObjects as rendered on the page, so</span>
<span class="sd">        you may see the same named XObject multiple times.  If you</span>
<span class="sd">        need to access their actual definitions you&#39;ll have to look at</span>
<span class="sd">        `page.resources`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;XObjectObject&quot;</span><span class="p">],</span>
            <span class="nb">iter</span><span class="p">(</span><span class="n">LazyInterpreter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">,</span> <span class="n">filter_class</span><span class="o">=</span><span class="n">XObjectObject</span><span class="p">)),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over tokens in the content streams.&quot;&quot;&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ContentParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">tok</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">yield</span> <span class="n">tok</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Page: Resources=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="si">!r}</span><span class="s2">, MediaBox=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mediabox</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">CO</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">CO</span><span class="p">]:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">flatten</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filter_class</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">CO</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">CO</span><span class="p">,</span> <span class="s2">&quot;ContentObject&quot;</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over content objects, recursing into form XObjects.&quot;&quot;&quot;</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Set</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">flatten_one</span><span class="p">(</span>
            <span class="n">itor</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">],</span> <span class="n">parents</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">itor</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">XObjectObject</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">xobjid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
                    <span class="k">yield from</span> <span class="n">flatten_one</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">parents</span> <span class="o">|</span> <span class="p">{</span><span class="n">obj</span><span class="o">.</span><span class="n">xobjid</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">obj</span>

        <span class="k">if</span> <span class="n">filter_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">flatten_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">flatten_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">set</span><span class="p">()):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">filter_class</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">obj</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do some best-effort text extraction.</span>

<span class="sd">        This necessarily involves a few heuristics, so don&#39;t get your</span>
<span class="sd">        hopes up.  It will attempt to use marked content information</span>
<span class="sd">        for a tagged PDF, otherwise it will fall back on the character</span>
<span class="sd">        displacement and line matrix to determine word and line breaks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">is_tagged</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_text_tagged</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_text_untagged</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_text_untagged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get text from a page of an untagged PDF.&quot;&quot;&quot;</span>
        <span class="n">prev_line_matrix</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">prev_end</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">TextObject</span><span class="p">):</span>
            <span class="n">line_matrix</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">line_matrix</span>
            <span class="n">vertical</span> <span class="o">=</span> <span class="p">(</span>
                <span class="kc">False</span> <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">vertical</span>
            <span class="p">)</span>
            <span class="n">lpos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="k">if</span> <span class="n">vertical</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">prev_line_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">line_matrix</span><span class="p">[</span><span class="n">lpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">prev_line_matrix</span><span class="p">[</span><span class="n">lpos</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">))</span>
                <span class="n">strings</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">wpos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">vertical</span> <span class="k">else</span> <span class="o">-</span><span class="mi">2</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">prev_line_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">prev_end</span> <span class="o">+</span> <span class="n">prev_line_matrix</span><span class="p">[</span><span class="n">wpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">line_matrix</span><span class="p">[</span><span class="n">wpos</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="n">textstr</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">_extract_text_from_obj</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">vertical</span><span class="p">)</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">textstr</span><span class="p">)</span>
            <span class="n">prev_line_matrix</span> <span class="o">=</span> <span class="n">line_matrix</span>
            <span class="n">prev_end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="k">if</span> <span class="n">strings</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">))</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_text_tagged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get text from a page of a tagged PDF.&quot;&quot;&quot;</span>
        <span class="n">lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">strings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">at_mcs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">MarkedContent</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">prev_mcid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">TextObject</span><span class="p">):</span>
            <span class="n">in_artifact</span> <span class="o">=</span> <span class="n">same_actual_text</span> <span class="o">=</span> <span class="n">reversed_chars</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">actual_text</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">mcs</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">mcstack</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">mcs</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;Artifact&quot;</span><span class="p">:</span>
                    <span class="n">in_artifact</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
                <span class="n">actual_text</span> <span class="o">=</span> <span class="n">mcs</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ActualText&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">actual_text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">mcs</span> <span class="ow">is</span> <span class="n">at_mcs</span><span class="p">:</span>
                        <span class="n">same_actual_text</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">at_mcs</span> <span class="o">=</span> <span class="n">mcs</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">mcs</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;ReversedChars&quot;</span><span class="p">:</span>
                    <span class="n">reversed_chars</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">in_artifact</span> <span class="ow">or</span> <span class="n">same_actual_text</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">actual_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">chars</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">chars</span>
                <span class="k">if</span> <span class="n">reversed_chars</span><span class="p">:</span>
                    <span class="n">chars</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">actual_text</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
                <span class="n">chars</span> <span class="o">=</span> <span class="n">actual_text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;UTF-16&quot;</span><span class="p">)</span>
            <span class="c1"># Remove soft hyphens</span>
            <span class="n">chars</span> <span class="o">=</span> <span class="n">chars</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xad</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="c1"># Insert a line break (FIXME: not really correct)</span>
            <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">mcid</span> <span class="o">!=</span> <span class="n">prev_mcid</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)))</span>
                <span class="n">strings</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">prev_mcid</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">mcid</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">strings</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)))</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.annotations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">annotations</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Lazily iterate over page annotations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.contents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">contents</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over PDF objects in the content streams.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.height" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">height</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Width of the page in default user space units.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">images</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over lazy image objects.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.paths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">paths</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over lazy path objects.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.streams" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">streams</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Return resolved content streams.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.texts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">texts</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over lazy text objects.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.tokens" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tokens</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over tokens in the content streams.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.width" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">width</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Width of the page in default user space units.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.Page.xobjects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">xobjects</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Return resolved and rendered Form XObjects.</p>
<p>This does <em>not</em> return any image or PostScript XObjects.  You
can get images via the <code>images</code> property.  Apparently you
aren't supposed to use PostScript XObjects for anything, ever.</p>
<p>Note that these are the XObjects as rendered on the page, so
you may see the same named XObject multiple times.  If you
need to access their actual definitions you'll have to look at
<code>page.resources</code>.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.Page.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over lazy layout objects.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterator over lazy layout objects.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">LazyInterpreter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contents</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.Page.extract_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_text</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Do some best-effort text extraction.</p>
<p>This necessarily involves a few heuristics, so don't get your
hopes up.  It will attempt to use marked content information
for a tagged PDF, otherwise it will fall back on the character
displacement and line matrix to determine word and line breaks.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do some best-effort text extraction.</span>

<span class="sd">    This necessarily involves a few heuristics, so don&#39;t get your</span>
<span class="sd">    hopes up.  It will attempt to use marked content information</span>
<span class="sd">    for a tagged PDF, otherwise it will fall back on the character</span>
<span class="sd">    displacement and line matrix to determine word and line breaks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">is_tagged</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_text_tagged</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_text_untagged</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.Page.extract_text_tagged" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_text_tagged</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get text from a page of a tagged PDF.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_text_tagged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get text from a page of a tagged PDF.&quot;&quot;&quot;</span>
    <span class="n">lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">strings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">at_mcs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">MarkedContent</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_mcid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">TextObject</span><span class="p">):</span>
        <span class="n">in_artifact</span> <span class="o">=</span> <span class="n">same_actual_text</span> <span class="o">=</span> <span class="n">reversed_chars</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">actual_text</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">mcs</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">mcstack</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">mcs</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;Artifact&quot;</span><span class="p">:</span>
                <span class="n">in_artifact</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
            <span class="n">actual_text</span> <span class="o">=</span> <span class="n">mcs</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ActualText&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">actual_text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mcs</span> <span class="ow">is</span> <span class="n">at_mcs</span><span class="p">:</span>
                    <span class="n">same_actual_text</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">at_mcs</span> <span class="o">=</span> <span class="n">mcs</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">mcs</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;ReversedChars&quot;</span><span class="p">:</span>
                <span class="n">reversed_chars</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">in_artifact</span> <span class="ow">or</span> <span class="n">same_actual_text</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">actual_text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">chars</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">chars</span>
            <span class="k">if</span> <span class="n">reversed_chars</span><span class="p">:</span>
                <span class="n">chars</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">actual_text</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
            <span class="n">chars</span> <span class="o">=</span> <span class="n">actual_text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;UTF-16&quot;</span><span class="p">)</span>
        <span class="c1"># Remove soft hyphens</span>
        <span class="n">chars</span> <span class="o">=</span> <span class="n">chars</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xad</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># Insert a line break (FIXME: not really correct)</span>
        <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">mcid</span> <span class="o">!=</span> <span class="n">prev_mcid</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)))</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">prev_mcid</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">mcid</span>
        <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">strings</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">textwrap</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">)))</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.Page.extract_text_untagged" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_text_untagged</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get text from a page of an untagged PDF.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_text_untagged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get text from a page of an untagged PDF.&quot;&quot;&quot;</span>
    <span class="n">prev_line_matrix</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prev_end</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">TextObject</span><span class="p">):</span>
        <span class="n">line_matrix</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">line_matrix</span>
        <span class="n">vertical</span> <span class="o">=</span> <span class="p">(</span>
            <span class="kc">False</span> <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">text</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">vertical</span>
        <span class="p">)</span>
        <span class="n">lpos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="k">if</span> <span class="n">vertical</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">prev_line_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">line_matrix</span><span class="p">[</span><span class="n">lpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">prev_line_matrix</span><span class="p">[</span><span class="n">lpos</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">))</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">wpos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">vertical</span> <span class="k">else</span> <span class="o">-</span><span class="mi">2</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">prev_line_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">prev_end</span> <span class="o">+</span> <span class="n">prev_line_matrix</span><span class="p">[</span><span class="n">wpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">line_matrix</span><span class="p">[</span><span class="n">wpos</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">textstr</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">_extract_text_from_obj</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">vertical</span><span class="p">)</span>
        <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">textstr</span><span class="p">)</span>
        <span class="n">prev_line_matrix</span> <span class="o">=</span> <span class="n">line_matrix</span>
        <span class="n">prev_end</span> <span class="o">=</span> <span class="n">end</span>
    <span class="k">if</span> <span class="n">strings</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strings</span><span class="p">))</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.Page.flatten" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">flatten</span><span class="p">(</span><span class="n">filter_class</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">flatten</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">ContentObject</span><span class="p">]</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">flatten</span><span class="p">(</span><span class="n">filter_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">CO</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">CO</span><span class="p">]</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Iterate over content objects, recursing into form XObjects.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">flatten</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filter_class</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">CO</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">CO</span><span class="p">,</span> <span class="s2">&quot;ContentObject&quot;</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over content objects, recursing into form XObjects.&quot;&quot;&quot;</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Set</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">flatten_one</span><span class="p">(</span>
        <span class="n">itor</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">],</span> <span class="n">parents</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">itor</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">XObjectObject</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">xobjid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
                <span class="k">yield from</span> <span class="n">flatten_one</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">parents</span> <span class="o">|</span> <span class="p">{</span><span class="n">obj</span><span class="o">.</span><span class="n">xobjid</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">obj</span>

    <span class="k">if</span> <span class="n">filter_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield from</span> <span class="n">flatten_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">flatten_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">set</span><span class="p">()):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">filter_class</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.PathObject" class="doc doc-heading">
            <code>PathObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>A path object.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.PathObject.raw_segments">raw_segments</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="PathSegment (playa.page.PathSegment)" href="#playa.page.PathSegment">PathSegment</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Segments in path (in user space).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.PathObject.stroke">stroke</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the outline of the path is stroked.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.PathObject.fill">fill</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the path is filled.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.PathObject.evenodd">evenodd</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the filling of complex paths uses the even-odd
winding rule, False if the non-zero winding number rule is
used (PDF 1.7 section 8.5.3.3)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PathObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A path object.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      raw_segments: Segments in path (in user space).</span>
<span class="sd">      stroke: True if the outline of the path is stroked.</span>
<span class="sd">      fill: True if the path is filled.</span>
<span class="sd">      evenodd: True if the filling of complex paths uses the even-odd</span>
<span class="sd">        winding rule, False if the non-zero winding number rule is</span>
<span class="sd">        used (PDF 1.7 section 8.5.3.3)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">raw_segments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PathSegment</span><span class="p">]</span>
    <span class="n">stroke</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">fill</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">evenodd</span><span class="p">:</span> <span class="nb">bool</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of subpaths.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span> <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over subpaths.</span>

<span class="sd">        If there is only a single subpath, it will still be iterated</span>
<span class="sd">        over.  This means that some care must be taken (for example,</span>
<span class="sd">        checking if `len(path) == 1`) to avoid endless recursion.</span>

<span class="sd">        Note: subpaths inherit the values of `fill` and `evenodd` from</span>
<span class="sd">        the parent path, but these values are no longer meaningful</span>
<span class="sd">        since the winding rules must be applied to the composite path</span>
<span class="sd">        as a whole (this is not a bug, just don&#39;t rely on them to know</span>
<span class="sd">        which regions are filled or not).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME: Is there an itertool or a more_itertool for this?</span>
        <span class="n">segs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span> <span class="ow">and</span> <span class="n">segs</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">PathObject</span><span class="p">(</span>
                    <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
                    <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
                    <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
                    <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
                    <span class="n">raw_segments</span><span class="o">=</span><span class="n">segs</span><span class="p">,</span>
                    <span class="n">stroke</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">,</span>
                    <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
                    <span class="n">evenodd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">evenodd</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">segs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">segs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">segs</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">PathObject</span><span class="p">(</span>
                <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
                <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
                <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
                <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
                <span class="n">raw_segments</span><span class="o">=</span><span class="n">segs</span><span class="p">,</span>
                <span class="n">stroke</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
                <span class="n">evenodd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">evenodd</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">PathSegment</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get path segments in device space.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">PathSegment</span><span class="p">(</span>
                <span class="n">p</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">apply_matrix_pt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">points</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get bounding box of path in device space as defined by its</span>
<span class="sd">        points and control points.&quot;&quot;&quot;</span>
        <span class="c1"># First get the bounding box in user space (fast)</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">get_bound</span><span class="p">(</span>
            <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">points</span> <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Transform it and get the new bounding box</span>
        <span class="k">return</span> <span class="n">get_transformed_bound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">bbox</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.PathObject.bbox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bbox</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get bounding box of path in device space as defined by its
points and control points.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.PathObject.segments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">segments</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get path segments in device space.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.PathObject.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over subpaths.</p>
<p>If there is only a single subpath, it will still be iterated
over.  This means that some care must be taken (for example,
checking if <code>len(path) == 1</code>) to avoid endless recursion.</p>
<p>Note: subpaths inherit the values of <code>fill</code> and <code>evenodd</code> from
the parent path, but these values are no longer meaningful
since the winding rules must be applied to the composite path
as a whole (this is not a bug, just don't rely on them to know
which regions are filled or not).</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over subpaths.</span>

<span class="sd">    If there is only a single subpath, it will still be iterated</span>
<span class="sd">    over.  This means that some care must be taken (for example,</span>
<span class="sd">    checking if `len(path) == 1`) to avoid endless recursion.</span>

<span class="sd">    Note: subpaths inherit the values of `fill` and `evenodd` from</span>
<span class="sd">    the parent path, but these values are no longer meaningful</span>
<span class="sd">    since the winding rules must be applied to the composite path</span>
<span class="sd">    as a whole (this is not a bug, just don&#39;t rely on them to know</span>
<span class="sd">    which regions are filled or not).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FIXME: Is there an itertool or a more_itertool for this?</span>
    <span class="n">segs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span> <span class="ow">and</span> <span class="n">segs</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">PathObject</span><span class="p">(</span>
                <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
                <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
                <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
                <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
                <span class="n">raw_segments</span><span class="o">=</span><span class="n">segs</span><span class="p">,</span>
                <span class="n">stroke</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
                <span class="n">evenodd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">evenodd</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">segs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">segs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">segs</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">PathObject</span><span class="p">(</span>
            <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
            <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
            <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
            <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
            <span class="n">raw_segments</span><span class="o">=</span><span class="n">segs</span><span class="p">,</span>
            <span class="n">stroke</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stroke</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
            <span class="n">evenodd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">evenodd</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.PathObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Number of subpaths.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Number of subpaths.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_segments</span> <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;m&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.PathSegment" class="doc doc-heading">
            <code>PathSegment</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.NamedTuple">NamedTuple</span></code></p>


        <p>Segment in a PDF graphics path.</p>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PathSegment</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Segment in a PDF graphics path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">operator</span><span class="p">:</span> <span class="n">PathOperator</span>
    <span class="n">points</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Point</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.TagObject" class="doc doc-heading">
            <code>TagObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>A marked content tag..</p>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TagObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A marked content tag..&quot;&quot;&quot;</span>

    <span class="n">_mcs</span><span class="p">:</span> <span class="n">MarkedContent</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tag has no contents, iterating over it returns nothing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mcs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MarkedContent</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The marked content tag for this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcs</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mcid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The marked content ID of the nearest enclosing marked</span>
<span class="sd">        content section with an ID.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcs</span><span class="o">.</span><span class="n">mcid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mcs</span><span class="o">.</span><span class="n">mcid</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">mcid</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tag has no content and thus no bounding box.</span>

<span class="sd">        To avoid needlessly complicating user code this returns</span>
<span class="sd">        `BBOX_NONE` instead of `None` or throwing a exception.</span>
<span class="sd">        Because that is a specific object, you can reliably check for</span>
<span class="sd">        it with:</span>

<span class="sd">            if obj.bbox is BBOX_NONE:</span>
<span class="sd">                ...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BBOX_NONE</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.TagObject.bbox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bbox</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>A tag has no content and thus no bounding box.</p>
<p>To avoid needlessly complicating user code this returns
<code>BBOX_NONE</code> instead of <code>None</code> or throwing a exception.
Because that is a specific object, you can reliably check for
it with:</p>
<pre><code>if obj.bbox is BBOX_NONE:
    ...
</code></pre>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.TagObject.mcid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mcid</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The marked content ID of the nearest enclosing marked
content section with an ID.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.TagObject.mcs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mcs</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The marked content tag for this object.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.TagObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>A tag has no contents, iterating over it returns nothing.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A tag has no contents, iterating over it returns nothing.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.TextObject" class="doc doc-heading">
            <code>TextObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>Text object (contains one or more glyphs).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextObject.textstate">textstate</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TextState


  
      dataclass
   (playa.page.TextState)" href="#playa.page.TextState">TextState</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text state for this object.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextObject.args">args</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Union">Union</span>[<span title="bytes">bytes</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Strings or position adjustments</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextObject.bbox">bbox</span></code></td>
            <td>
                  <code><span title="playa.utils.Rect">Rect</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text bounding box in device space.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextObject.text_space_bbox">text_space_bbox</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text bounding box in text space (i.e. before
               any possible coordinate transformation)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TextObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Text object (contains one or more glyphs).</span>

<span class="sd">    Attributes:</span>
<span class="sd">      textstate: Text state for this object.</span>
<span class="sd">      args: Strings or position adjustments</span>
<span class="sd">      bbox: Text bounding box in device space.</span>
<span class="sd">      text_space_bbox: Text bounding box in text space (i.e. before</span>
<span class="sd">                       any possible coordinate transformation)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">textstate</span><span class="p">:</span> <span class="n">TextState</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
    <span class="n">_chars</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_bbox</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Rect</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_text_space_bbox</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Rect</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_next_tstate</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">TextState</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">GlyphObject</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate glyphs for this text object&quot;&quot;&quot;</span>
        <span class="n">tstate</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="p">)</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">font</span>
        <span class="c1"># If no font is set, we cannot do anything, since even calling</span>
        <span class="c1"># TJ with a displacement and no text effects requires us at</span>
        <span class="c1"># least to know the fontsize.</span>
        <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;No font is set, will not update text state or output text: </span><span class="si">%r</span><span class="s2"> TJ&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>
            <span class="k">return</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="c1"># Extract all the elements so we can translate efficiently</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">(</span><span class="n">tstate</span><span class="o">.</span><span class="n">line_matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
        <span class="c1"># Pre-determine if we need to recompute the bound for rotated glyphs</span>
        <span class="n">corners</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span>
        <span class="c1"># Apply horizontal scaling</span>
        <span class="n">scaling</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">scaling</span> <span class="o">*</span> <span class="mf">0.01</span>
        <span class="n">charspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">charspace</span> <span class="o">*</span> <span class="n">scaling</span>
        <span class="n">wordspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">wordspace</span> <span class="o">*</span> <span class="n">scaling</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">vertical</span>
        <span class="k">if</span> <span class="n">font</span><span class="o">.</span><span class="n">multibyte</span><span class="p">:</span>
            <span class="n">wordspace</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">y</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="n">x</span>
        <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Only for first glyph</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">dxscale</span> <span class="o">=</span> <span class="mf">0.001</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
                <span class="n">pos</span> <span class="o">-=</span> <span class="n">obj</span> <span class="o">*</span> <span class="n">dxscale</span>
                <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">needcharspace</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">+=</span> <span class="n">charspace</span>
                    <span class="n">textwidth</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">char_width</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
                    <span class="n">adv</span> <span class="o">=</span> <span class="n">textwidth</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">glyph</span> <span class="o">=</span> <span class="n">GlyphObject</span><span class="p">(</span>
                        <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
                        <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
                        <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
                        <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
                        <span class="n">textstate</span><span class="o">=</span><span class="n">tstate</span><span class="p">,</span>
                        <span class="n">cid</span><span class="o">=</span><span class="n">cid</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                        <span class="c1"># Do pre-translation internally (taking rotation into account)</span>
                        <span class="n">matrix</span><span class="o">=</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">e</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">d</span> <span class="o">+</span> <span class="n">f</span><span class="p">),</span>
                        <span class="n">adv</span><span class="o">=</span><span class="n">adv</span><span class="p">,</span>
                        <span class="n">corners</span><span class="o">=</span><span class="n">corners</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">yield</span> <span class="n">glyph</span>
                    <span class="n">pos</span> <span class="o">+=</span> <span class="n">adv</span>
                    <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="mi">32</span> <span class="ow">and</span> <span class="n">wordspace</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">+=</span> <span class="n">wordspace</span>
                    <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">text_space_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span>
        <span class="c1"># No need to save tstate as we do not update it below</span>
        <span class="n">tstate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textstate</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">font</span>
        <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;No font is set, will not update text state or output text: </span><span class="si">%r</span><span class="s2"> TJ&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span> <span class="o">=</span> <span class="n">BBOX_NONE</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span> <span class="o">=</span> <span class="n">BBOX_NONE</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span>
        <span class="n">scaling</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">scaling</span> <span class="o">*</span> <span class="mf">0.01</span>
        <span class="n">charspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">charspace</span> <span class="o">*</span> <span class="n">scaling</span>
        <span class="n">wordspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">wordspace</span> <span class="o">*</span> <span class="n">scaling</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">vertical</span>
        <span class="k">if</span> <span class="n">font</span><span class="o">.</span><span class="n">multibyte</span><span class="p">:</span>
            <span class="n">wordspace</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">y</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="n">x</span>
        <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Only for first glyph</span>
        <span class="k">if</span> <span class="n">vert</span><span class="p">:</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># These do not change!</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">descent</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">dxscale</span> <span class="o">=</span> <span class="mf">0.001</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
                <span class="n">pos</span> <span class="o">-=</span> <span class="n">obj</span> <span class="o">*</span> <span class="n">dxscale</span>
                <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">needcharspace</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">+=</span> <span class="n">charspace</span>
                    <span class="n">textwidth</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">char_width</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
                    <span class="n">adv</span> <span class="o">=</span> <span class="n">textwidth</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">vert</span><span class="p">:</span>
                        <span class="n">textdisp</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">char_disp</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
                        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">textdisp</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
                        <span class="p">(</span><span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">)</span> <span class="o">=</span> <span class="n">textdisp</span>
                        <span class="k">if</span> <span class="n">vx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">vx</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.5</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">vx</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.001</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">-</span> <span class="n">vy</span><span class="p">)</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.001</span>
                        <span class="n">x0</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">vx</span><span class="p">)</span>
                        <span class="n">y0</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span> <span class="o">+</span> <span class="n">adv</span><span class="p">)</span>
                        <span class="n">x1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
                        <span class="n">y1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">tstate</span><span class="o">.</span><span class="n">rise</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">adv</span>
                    <span class="n">pos</span> <span class="o">+=</span> <span class="n">adv</span>
                    <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="mi">32</span> <span class="ow">and</span> <span class="n">wordspace</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">+=</span> <span class="n">wordspace</span>
                    <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">tstate</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span> <span class="o">=</span> <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_space_bbox</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">next_textstate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TextState</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_space_bbox</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
        <span class="c1"># We specialize this to avoid it having side effects on the</span>
        <span class="c1"># text state (already it&#39;s a bit of a footgun that __iter__</span>
        <span class="c1"># does that...), but also because we know all glyphs have the</span>
        <span class="c1"># same text matrix and thus we can avoid a lot of multiply</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">line_matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox</span> <span class="o">=</span> <span class="n">get_transformed_bound</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_space_bbox</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">chars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Unicode characters (in stream order) for this object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chars</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span>
        <span class="k">assert</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;No font was selected&quot;</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_chars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chars</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the number of glyphs that would result from iterating over</span>
<span class="sd">        this object.</span>

<span class="sd">        Important: this is the number of glyphs, *not* the number of</span>
<span class="sd">        Unicode characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nglyphs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span>
        <span class="k">assert</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;No font was selected&quot;</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">nglyphs</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">nglyphs</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.TextObject.chars" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">chars</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the Unicode characters (in stream order) for this object.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.page.TextObject.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Generate glyphs for this text object</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">GlyphObject</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate glyphs for this text object&quot;&quot;&quot;</span>
    <span class="n">tstate</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="p">)</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">font</span>
    <span class="c1"># If no font is set, we cannot do anything, since even calling</span>
    <span class="c1"># TJ with a displacement and no text effects requires us at</span>
    <span class="c1"># least to know the fontsize.</span>
    <span class="k">if</span> <span class="n">font</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;No font is set, will not update text state or output text: </span><span class="si">%r</span><span class="s2"> TJ&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>
        <span class="k">return</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="c1"># Extract all the elements so we can translate efficiently</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">mult_matrix</span><span class="p">(</span><span class="n">tstate</span><span class="o">.</span><span class="n">line_matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">)</span>
    <span class="c1"># Pre-determine if we need to recompute the bound for rotated glyphs</span>
    <span class="n">corners</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span>
    <span class="c1"># Apply horizontal scaling</span>
    <span class="n">scaling</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">scaling</span> <span class="o">*</span> <span class="mf">0.01</span>
    <span class="n">charspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">charspace</span> <span class="o">*</span> <span class="n">scaling</span>
    <span class="n">wordspace</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">wordspace</span> <span class="o">*</span> <span class="n">scaling</span>
    <span class="n">vert</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">vertical</span>
    <span class="k">if</span> <span class="n">font</span><span class="o">.</span><span class="n">multibyte</span><span class="p">:</span>
        <span class="n">wordspace</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">y</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="n">x</span>
    <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Only for first glyph</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="n">dxscale</span> <span class="o">=</span> <span class="mf">0.001</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
            <span class="n">pos</span> <span class="o">-=</span> <span class="n">obj</span> <span class="o">*</span> <span class="n">dxscale</span>
            <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">needcharspace</span><span class="p">:</span>
                    <span class="n">pos</span> <span class="o">+=</span> <span class="n">charspace</span>
                <span class="n">textwidth</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">char_width</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
                <span class="n">adv</span> <span class="o">=</span> <span class="n">textwidth</span> <span class="o">*</span> <span class="n">tstate</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">*</span> <span class="n">scaling</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">glyph</span> <span class="o">=</span> <span class="n">GlyphObject</span><span class="p">(</span>
                    <span class="n">_pageref</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">,</span>
                    <span class="n">gstate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gstate</span><span class="p">,</span>
                    <span class="n">ctm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span>
                    <span class="n">mcstack</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mcstack</span><span class="p">,</span>
                    <span class="n">textstate</span><span class="o">=</span><span class="n">tstate</span><span class="p">,</span>
                    <span class="n">cid</span><span class="o">=</span><span class="n">cid</span><span class="p">,</span>
                    <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                    <span class="c1"># Do pre-translation internally (taking rotation into account)</span>
                    <span class="n">matrix</span><span class="o">=</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">e</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">d</span> <span class="o">+</span> <span class="n">f</span><span class="p">),</span>
                    <span class="n">adv</span><span class="o">=</span><span class="n">adv</span><span class="p">,</span>
                    <span class="n">corners</span><span class="o">=</span><span class="n">corners</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">yield</span> <span class="n">glyph</span>
                <span class="n">pos</span> <span class="o">+=</span> <span class="n">adv</span>
                <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="mi">32</span> <span class="ow">and</span> <span class="n">wordspace</span><span class="p">:</span>
                    <span class="n">pos</span> <span class="o">+=</span> <span class="n">wordspace</span>
                <span class="n">needcharspace</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tstate</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span> <span class="k">if</span> <span class="n">vert</span> <span class="k">else</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_next_tstate</span> <span class="o">=</span> <span class="n">tstate</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.page.TextObject.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the number of glyphs that would result from iterating over
this object.</p>
<p>Important: this is the number of glyphs, <em>not</em> the number of
Unicode characters.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the number of glyphs that would result from iterating over</span>
<span class="sd">    this object.</span>

<span class="sd">    Important: this is the number of glyphs, *not* the number of</span>
<span class="sd">    Unicode characters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nglyphs</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">font</span>
    <span class="k">assert</span> <span class="n">font</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;No font was selected&quot;</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">nglyphs</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">nglyphs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.TextState" class="doc doc-heading">
            <code>TextState</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>PDF Text State (PDF 1.7 section 9.3.1).</p>
<p>Exceptionally, the line matrix and text matrix are represented
more compactly with the line matrix itself in <code>line_matrix</code>, which
gets translated by <code>glyph_offset</code> for the current glyph (note:
expressed in <strong>user space</strong>), which pdfminer confusingly called
<code>linematrix</code>, to produce the text matrix.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.line_matrix">line_matrix</span></code></td>
            <td>
                  <code><span title="playa.utils.Matrix">Matrix</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text line matrix, which defines (in user
space) the start of the current line of text, which may or may
not correspond to an actual line because PDF is a presentation
format.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.glyph_offset">glyph_offset</span></code></td>
            <td>
                  <code><span title="playa.utils.Point">Point</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The offset of the current glyph with relation to
the line matrix, in text space units.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.font">font</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="playa.font.Font">Font</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current font.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.fontsize">fontsize</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current font size, <strong>in text space units</strong>.
This is often just 1.0 as it relies on the text matrix (you
may use <code>line_matrix</code> here) to scale it to the actual size in
user space.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.charspace">charspace</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra spacing to add between each glyph, in
text space units.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.wordspace">wordspace</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of a space, defined curiously as <code>cid==32</code>
(But PDF Is A prESeNTaTion fORmAT sO ThERe maY NOt Be aNY
SpACeS!!), in text space units.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.scaling">scaling</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The horizontal scaling factor as defined by the PDF
standard.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.leading">leading</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The leading as defined by the PDF standard.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.render_mode">render_mode</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PDF rendering mode.  The really important one
here is 3, which means "don't render the text".  You might
want to use this to detect invisible text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.rise">rise</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text rise (superscript or subscript position), in text
space units.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.TextState.descent">descent</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The font's descent (scaled by the font size), in text
space units (this is not really part of the text state but is
kept here to avoid recomputing it on every glyph)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TextState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF Text State (PDF 1.7 section 9.3.1).</span>

<span class="sd">    Exceptionally, the line matrix and text matrix are represented</span>
<span class="sd">    more compactly with the line matrix itself in `line_matrix`, which</span>
<span class="sd">    gets translated by `glyph_offset` for the current glyph (note:</span>
<span class="sd">    expressed in **user space**), which pdfminer confusingly called</span>
<span class="sd">    `linematrix`, to produce the text matrix.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      line_matrix: The text line matrix, which defines (in user</span>
<span class="sd">        space) the start of the current line of text, which may or may</span>
<span class="sd">        not correspond to an actual line because PDF is a presentation</span>
<span class="sd">        format.</span>
<span class="sd">      glyph_offset: The offset of the current glyph with relation to</span>
<span class="sd">        the line matrix, in text space units.</span>
<span class="sd">      font: The current font.</span>
<span class="sd">      fontsize: The current font size, **in text space units**.</span>
<span class="sd">        This is often just 1.0 as it relies on the text matrix (you</span>
<span class="sd">        may use `line_matrix` here) to scale it to the actual size in</span>
<span class="sd">        user space.</span>
<span class="sd">      charspace: Extra spacing to add between each glyph, in</span>
<span class="sd">        text space units.</span>
<span class="sd">      wordspace: The width of a space, defined curiously as `cid==32`</span>
<span class="sd">        (But PDF Is A prESeNTaTion fORmAT sO ThERe maY NOt Be aNY</span>
<span class="sd">        SpACeS!!), in text space units.</span>
<span class="sd">      scaling: The horizontal scaling factor as defined by the PDF</span>
<span class="sd">        standard.</span>
<span class="sd">      leading: The leading as defined by the PDF standard.</span>
<span class="sd">      render_mode: The PDF rendering mode.  The really important one</span>
<span class="sd">        here is 3, which means &quot;don&#39;t render the text&quot;.  You might</span>
<span class="sd">        want to use this to detect invisible text.</span>
<span class="sd">      rise: The text rise (superscript or subscript position), in text</span>
<span class="sd">        space units.</span>
<span class="sd">      descent: The font&#39;s descent (scaled by the font size), in text</span>
<span class="sd">        space units (this is not really part of the text state but is</span>
<span class="sd">        kept here to avoid recomputing it on every glyph)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">line_matrix</span><span class="p">:</span> <span class="n">Matrix</span> <span class="o">=</span> <span class="n">MATRIX_IDENTITY</span>
    <span class="n">glyph_offset</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">font</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Font</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">fontsize</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">charspace</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wordspace</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">scaling</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">leading</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">render_mode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">rise</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">descent</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the text state&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_matrix</span> <span class="o">=</span> <span class="n">MATRIX_IDENTITY</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="playa.page.TextState.reset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reset the text state</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset the text state&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">line_matrix</span> <span class="o">=</span> <span class="n">MATRIX_IDENTITY</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">glyph_offset</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.page.XObjectObject" class="doc doc-heading">
            <code>XObjectObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ContentObject


  
      dataclass
   (playa.page.ContentObject)" href="#playa.page.ContentObject">ContentObject</a></code></p>


        <p>An eXternal Object, in the context of a page.</p>
<p>There are a couple of kinds of XObjects.  Here we are only
concerned with "Form XObjects" which, despite their name, have
nothing at all to do with fillable forms.  Instead they are like
little embeddable PDF pages, possibly with their own resources,
definitely with their own definition of "user space".</p>
<p>Image XObjects are handled by <code>ImageObject</code>.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.XObjectObject.xobjid">xobjid</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of this XObject (in the page resources).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="page

  
      property
   (playa.page.XObjectObject.page)" href="#playa.page.XObjectObject.page">page</a></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Page (playa.page.Page)" href="#playa.page.Page">Page</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Weak reference to containing page.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.XObjectObject.stream">stream</span></code></td>
            <td>
                  <code><span title="playa.pdftypes.ContentStream">ContentStream</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content stream with PDF operators.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="playa.page.XObjectObject.resources">resources</span></code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[None, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="playa.parser.PDFObject">PDFObject</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resources specific to this XObject, if any.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/page.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">XObjectObject</span><span class="p">(</span><span class="n">ContentObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An eXternal Object, in the context of a page.</span>

<span class="sd">    There are a couple of kinds of XObjects.  Here we are only</span>
<span class="sd">    concerned with &quot;Form XObjects&quot; which, despite their name, have</span>
<span class="sd">    nothing at all to do with fillable forms.  Instead they are like</span>
<span class="sd">    little embeddable PDF pages, possibly with their own resources,</span>
<span class="sd">    definitely with their own definition of &quot;user space&quot;.</span>

<span class="sd">    Image XObjects are handled by `ImageObject`.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      xobjid: Name of this XObject (in the page resources).</span>
<span class="sd">      page: Weak reference to containing page.</span>
<span class="sd">      stream: Content stream with PDF operators.</span>
<span class="sd">      resources: Resources specific to this XObject, if any.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">xobjid</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span>
    <span class="n">resources</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PDFObject</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the page (if it exists, raising RuntimeError if not).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Rect</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the bounding box of this XObject in device space.&quot;&quot;&quot;</span>
        <span class="c1"># It is a required attribute!</span>
        <span class="k">if</span> <span class="s2">&quot;BBox&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;XObject </span><span class="si">%r</span><span class="s2"> has no BBox: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xobjid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">cropbox</span>
        <span class="k">return</span> <span class="n">get_transformed_bound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">parse_rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;BBox&quot;</span><span class="p">]))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raw stream content for this XObject&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">buffer</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over tokens in the XObject&#39;s content stream.&quot;&quot;&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ContentParser</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">])</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">tok</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">yield</span> <span class="n">tok</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">contents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator over PDF objects in the content stream.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">ContentParser</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">]):</span>
            <span class="k">yield</span> <span class="n">obj</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;ContentObject&quot;</span><span class="p">]:</span>
        <span class="n">interp</span> <span class="o">=</span> <span class="n">LazyInterpreter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">)</span>
        <span class="n">interp</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctm</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="n">interp</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_stream</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">,</span>
        <span class="n">xobjid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;XObject&quot;</span><span class="p">,</span>
        <span class="n">gstate</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GraphicState</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ctm</span><span class="p">:</span> <span class="n">Matrix</span> <span class="o">=</span> <span class="n">MATRIX_IDENTITY</span><span class="p">,</span>
        <span class="n">mcstack</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">MarkedContent</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;XObjectObject&quot;</span><span class="p">:</span>
        <span class="c1"># Use defaults if not given</span>
        <span class="k">if</span> <span class="n">gstate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">gstate</span> <span class="o">=</span> <span class="n">GraphicState</span><span class="p">()</span>
        <span class="c1"># FIXME: Should validate that it is really a CTM</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Matrix</span><span class="p">,</span> <span class="n">list_value</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Matrix&quot;</span><span class="p">,</span> <span class="n">MATRIX_IDENTITY</span><span class="p">)))</span>
        <span class="c1"># According to PDF reference 1.7 section 4.9.1, XObjects in</span>
        <span class="c1"># earlier PDFs (prior to v1.2) use the page&#39;s Resources entry</span>
        <span class="c1"># instead of having their own Resources entry.  So, this could</span>
        <span class="c1"># be None, in which case LazyInterpreter will fall back to</span>
        <span class="c1"># page.resources.</span>
        <span class="n">xobjres</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Resources&quot;</span><span class="p">)</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">xobjres</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">xobjres</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">_pageref</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">pageref</span><span class="p">,</span>
            <span class="n">gstate</span><span class="o">=</span><span class="n">gstate</span><span class="p">,</span>
            <span class="n">ctm</span><span class="o">=</span><span class="n">mult_matrix</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">ctm</span><span class="p">),</span>
            <span class="n">mcstack</span><span class="o">=</span><span class="n">mcstack</span><span class="p">,</span>
            <span class="n">xobjid</span><span class="o">=</span><span class="n">xobjid</span><span class="p">,</span>
            <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span>
            <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.page.XObjectObject.bbox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bbox</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the bounding box of this XObject in device space.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.XObjectObject.buffer" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">buffer</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Raw stream content for this XObject</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.XObjectObject.contents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">contents</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterator over PDF objects in the content stream.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.XObjectObject.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the page (if it exists, raising RuntimeError if not).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.page.XObjectObject.tokens" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tokens</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over tokens in the XObject's content stream.</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="playa.page._extract_text_from_obj" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">_extract_text_from_obj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">vertical</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Try to get text from a text object.</p>


            <details class="quote">
              <summary>Source code in <code>playa/page.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_extract_text_from_obj</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;TextObject&quot;</span><span class="p">,</span> <span class="n">vertical</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Try to get text from a text object.&quot;&quot;&quot;</span>
    <span class="n">chars</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">prev_end</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">glyph</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">glyph</span><span class="o">.</span><span class="n">textstate</span><span class="o">.</span><span class="n">glyph_offset</span>
        <span class="n">off</span> <span class="o">=</span> <span class="n">y</span> <span class="k">if</span> <span class="n">vertical</span> <span class="k">else</span> <span class="n">x</span>
        <span class="c1"># FIXME: This is a heuristic!!!</span>
        <span class="k">if</span> <span class="n">prev_end</span> <span class="ow">and</span> <span class="n">off</span> <span class="o">-</span> <span class="n">prev_end</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
            <span class="n">chars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">glyph</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">chars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">glyph</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">prev_end</span> <span class="o">=</span> <span class="n">off</span> <span class="o">+</span> <span class="n">glyph</span><span class="o">.</span><span class="n">adv</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chars</span><span class="p">),</span> <span class="n">prev_end</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.parser" class="doc doc-heading">
            <code>playa.parser</code>


</h2>

    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="playa.parser.IndirectObjectParser" class="doc doc-heading">
            <code>IndirectObjectParser</code>


</h3>


    <div class="doc doc-contents ">


        <p>IndirectObjectParser fetches indirect objects from a data
stream.  It holds a weak reference to the document in order to
resolve indirect references.  If the document is deleted then this
will obviously no longer work.</p>
<p>Note that according to PDF 1.7 sec 7.5.3, "The body of a PDF file
shall consist of a sequence of indirect objects representing the
contents of a document."  Therefore unlike the base <code>ObjectParser</code>,
<code>IndirectObjectParser</code> returns <em>only</em> indrect objects and not bare
keywords, strings, numbers, etc.</p>
<p>However, unlike <code>ObjectParser</code>, it will also read and return
<code>ContentStream</code>s, as these <em>must</em> be indirect objects by definition.</p>


<details class="typical-usage" open>
  <summary>Typical usage</summary>
  <p>parser = IndirectObjectParser(fp, doc)
for object in parser:
    ...</p>
</details>






              <details class="quote">
                <summary>Source code in <code>playa/parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">IndirectObjectParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IndirectObjectParser fetches indirect objects from a data</span>
<span class="sd">    stream.  It holds a weak reference to the document in order to</span>
<span class="sd">    resolve indirect references.  If the document is deleted then this</span>
<span class="sd">    will obviously no longer work.</span>

<span class="sd">    Note that according to PDF 1.7 sec 7.5.3, &quot;The body of a PDF file</span>
<span class="sd">    shall consist of a sequence of indirect objects representing the</span>
<span class="sd">    contents of a document.&quot;  Therefore unlike the base `ObjectParser`,</span>
<span class="sd">    `IndirectObjectParser` returns *only* indrect objects and not bare</span>
<span class="sd">    keywords, strings, numbers, etc.</span>

<span class="sd">    However, unlike `ObjectParser`, it will also read and return</span>
<span class="sd">    `ContentStream`s, as these *must* be indirect objects by definition.</span>

<span class="sd">    Typical usage:</span>
<span class="sd">      parser = IndirectObjectParser(fp, doc)</span>
<span class="sd">      for object in parser:</span>
<span class="sd">          ...</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">],</span>
        <span class="n">doc</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strict</span> <span class="o">=</span> <span class="n">strict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">doc</span><span class="o">.</span><span class="n">decipher</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">]:</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">]</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;endobj&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endobj</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">KEYWORD_STREAM</span><span class="p">:</span>
                    <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stream</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">stream</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="n">KEYWORD_ENDSTREAM</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">ContentStream</span><span class="p">):</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Got endstream without a stream, ignoring!&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;endstream&quot;</span><span class="p">):</span>
                    <span class="c1"># Some broken PDFs have junk after &quot;endstream&quot;</span>
                    <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Expected &#39;endstream&#39;, got </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="p">,)</span>
                    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Syntax error near position </span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
                    <span class="k">continue</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_endobj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">PDFObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">]:</span>
        <span class="c1"># Some broken PDFs omit the space after `endobj`...</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">KEYWORD_ENDOBJ</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;endobj&quot;</span><span class="p">))</span>
        <span class="c1"># objid genno &quot;obj&quot; (skipped) ... and the object</span>
        <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="p">(</span><span class="n">kpos</span><span class="p">,</span> <span class="n">kwd</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">kwd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">KEYWORD_OBJ</span><span class="p">:</span>
            <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Expected &#39;obj&#39; at </span><span class="si">%d</span><span class="s2">, got </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">kpos</span><span class="p">,</span> <span class="n">kwd</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
        <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">genno</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="c1"># Update pos to be the beginning of the indirect object</span>
        <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objid</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
            <span class="n">genno</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">genno</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">objs</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="p">),</span> <span class="p">(</span><span class="n">objid</span><span class="p">,</span> <span class="n">genno</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">errmsg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to parse indirect object at </span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2">: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;got: </span><span class="si">{</span><span class="n">objs</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;before &#39;endobj&#39;&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="c1"># ContentStream is *special* and needs these</span>
        <span class="c1"># internally for decryption.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">):</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">objid</span> <span class="o">=</span> <span class="n">objid</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">genno</span> <span class="o">=</span> <span class="n">genno</span>
        <span class="c1"># Decrypt indirect objects at top level (inside object streams</span>
        <span class="c1"># they are handled by ObjectStreamParser)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decipher</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">(</span>
                <span class="n">objid</span><span class="p">,</span>
                <span class="n">genno</span><span class="p">,</span>
                <span class="n">decipher_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decipher</span><span class="p">,</span> <span class="n">objid</span><span class="p">,</span> <span class="n">genno</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">(</span><span class="n">objid</span><span class="p">,</span> <span class="n">genno</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">PDFObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ContentStream</span><span class="p">:</span>
        <span class="c1"># PDF 1.7 sec 7.3.8.1: A stream shall consist of a</span>
        <span class="c1"># dictionary followed by zero or more bytes bracketed</span>
        <span class="c1"># between the keywords `stream` (followed by newline)</span>
        <span class="c1"># and `endstream`</span>
        <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># sec 7.3.8.1: the stream dictionary shall be a</span>
            <span class="c1"># direct object.</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="s2">&quot;Incorrect type for stream dictionary </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># sec 7.3.8.2: Every stream dictionary shall have</span>
            <span class="c1"># a Length entry that indicates how many bytes of</span>
            <span class="c1"># the PDF file are used for the streams data</span>
            <span class="c1"># FIXME: This call is **not** thread-safe as we currently</span>
            <span class="c1"># reuse the same IndirectObjectParser to resolve references</span>
            <span class="n">objlen</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="s2">&quot;Length&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;/Length is undefined in stream dictionary </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span>
            <span class="n">objlen</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># FIXME: This warning should be suppressed in fallback</span>
            <span class="c1"># xref parsing, since we obviously can&#39;t resolve any</span>
            <span class="c1"># references yet.  Either that or fallback xref parsing</span>
            <span class="c1"># should just run a regex over the PDF and not try to</span>
            <span class="c1"># actually parse the objects (probably a better solution)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;/Length reference cannot be resolved in </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span>
            <span class="n">objlen</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="c1"># FIXME: This may happen with incremental updates</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;/Length reference resolves to non-integer in </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span>
            <span class="n">objlen</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># sec 7.3.8.1: The keyword `stream` that follows the stream</span>
        <span class="c1"># dictionary shall be followed by an end-of-line</span>
        <span class="c1"># marker consisting of either a CARRIAGE RETURN and a</span>
        <span class="c1"># LINE FEED or just a LINE FEED, and not by a CARRIAGE</span>
        <span class="c1"># RETURN alone.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;stream&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="c1"># Because PDFs do not follow the spec, we will read</span>
        <span class="c1"># *at least* the specified number of bytes, which</span>
        <span class="c1"># could be zero (particularly if not specified!), up</span>
        <span class="c1"># until the &quot;endstream&quot; tag.  In most cases it is</span>
        <span class="c1"># expected that this extra data will be included in</span>
        <span class="c1"># the stream anyway, but for encrypted streams you</span>
        <span class="c1"># probably don&#39;t want that (LOL @ PDF &quot;security&quot;)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">objlen</span><span class="p">)</span>
        <span class="c1"># sec 7.3.8.1: There should be an end-of-line</span>
        <span class="c1"># marker after the data and before endstream; this</span>
        <span class="c1"># marker shall not be included in the stream length.</span>
        <span class="n">linepos</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
            <span class="c1"># In reality there usually is no end-of-line</span>
            <span class="c1"># marker.  We will nonetheless warn if there&#39;s</span>
            <span class="c1"># something other than &#39;endstream&#39;.</span>
            <span class="k">if</span> <span class="n">line</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">b</span><span class="s2">&quot;endstream</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">b</span><span class="s2">&quot;endstream</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                    <span class="s2">&quot;Expected newline or &#39;endstream&#39;, got </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">line</span><span class="p">,)</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Reuse that line and read more if necessary</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">if</span> <span class="sa">b</span><span class="s2">&quot;endstream&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">idx</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;endstream&quot;</span><span class="p">)</span>
                    <span class="n">objlen</span> <span class="o">+=</span> <span class="n">idx</span>
                    <span class="n">data</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[:</span><span class="n">idx</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="n">objlen</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="n">objlen</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">+=</span> <span class="n">line</span>
                <span class="n">linepos</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>  <span class="c1"># Means EOF</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Incorrect length for stream, no &#39;endstream&#39; found&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span>
        <span class="k">return</span> <span class="n">ContentStream</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">doc</span><span class="o">.</span><span class="n">decipher</span><span class="p">)</span>

    <span class="c1"># Delegation follows</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Seek to a position.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear internal parser state.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.parser.IndirectObjectParser.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.parser.IndirectObjectParser.reset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Clear internal parser state.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear internal parser state.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.IndirectObjectParser.seek" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Seek to a position.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Seek to a position.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.parser.InlineImage" class="doc doc-heading">
            <code>InlineImage</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="playa.pdftypes.ContentStream">ContentStream</span></code></p>


        <p>Specific class for inline images so the interpreter can
recognize them (they are otherwise the same thing as content
streams).</p>







              <details class="quote">
                <summary>Source code in <code>playa/parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">InlineImage</span><span class="p">(</span><span class="n">ContentStream</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specific class for inline images so the interpreter can</span>
<span class="sd">    recognize them (they are otherwise the same thing as content</span>
<span class="sd">    streams).&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.parser.Lexer" class="doc doc-heading">
            <code>Lexer</code>


</h3>


    <div class="doc doc-contents ">


        <p>Lexer for PDF data.</p>







              <details class="quote">
                <summary>Source code in <code>playa/parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Lexer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lexer for PDF data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">],</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tokens</span><span class="p">:</span> <span class="n">Deque</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Seek to a position and reinitialize parser state.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tokens</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">tell</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current position in the buffer.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objlen</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read data from current position, advancing to the end of</span>
<span class="sd">        this data.&quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="n">objlen</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">nextline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the next line ending either with \r, \n, or \r\n,</span>
<span class="sd">        starting at the current position.&quot;&quot;&quot;</span>
        <span class="n">linepos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">EOLR</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">linepos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">linepos</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over tokens.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the next token in iteration, raising StopIteration when</span>
<span class="sd">        done.&quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">LEXER</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># can only happen at EOS</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;whitespace&quot;</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
                <span class="c1"># Okay, we got a token or something</span>
                <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">HEXDIGIT</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">16</span><span class="p">),)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span>
            <span class="p">)</span>
            <span class="n">tok</span> <span class="o">=</span> <span class="n">LIT</span><span class="p">(</span><span class="n">name_str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">tok</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="sa">b</span><span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;startdict&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KEYWORD_DICT_BEGIN</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;enddict&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KEYWORD_DICT_END</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;startstr&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_endstr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()],</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;hexstr&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">SPC</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">+=</span> <span class="sa">b</span><span class="s2">&quot;0&quot;</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">unhexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
        <span class="c1"># Anything else is treated as a keyword (whether explicitly matched or not)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;true&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;false&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KWD</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_endstr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse the remainder of a string.&quot;&quot;&quot;</span>
        <span class="c1"># Handle nonsense CRLF conversion in strings (PDF 1.7, p.15)</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">EOLR</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">start</span><span class="p">)]</span>
        <span class="n">paren</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">STRLEXER</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;parenright&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">paren</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">paren</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># By far the most common situation!</span>
                    <span class="k">break</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;parenleft&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">paren</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;escape&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="nb">chr</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">chr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ESC_STRING</span><span class="p">:</span>
                    <span class="c1"># PDF 1.7 sec 7.3.4.2: If the character following</span>
                    <span class="c1"># the REVERSE SOLIDUS is not one of those shown in</span>
                    <span class="c1"># Table 3, the REVERSE SOLIDUS shall be ignored.</span>
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">chr</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bytes</span><span class="p">((</span><span class="n">ESC_STRING</span><span class="p">[</span><span class="nb">chr</span><span class="p">],)))</span>
            <span class="k">elif</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;octal&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">chrcode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">8</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">chrcode</span> <span class="o">&gt;=</span> <span class="mi">256</span><span class="p">:</span>
                    <span class="c1"># PDF1.7 p.16: &quot;high-order overflow shall be</span>
                    <span class="c1"># ignored.&quot;</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid octal </span><span class="si">%r</span><span class="s2"> (</span><span class="si">%d</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:],</span> <span class="n">chrcode</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">bytes</span><span class="p">((</span><span class="n">chrcode</span><span class="p">,)))</span>
            <span class="k">elif</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;newline&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="c1"># Handle nonsense CRLF conversion in strings (PDF 1.7, p.15)</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;linebreak&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">paren</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unterminated string at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over tokens.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over tokens.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.__next__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__next__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the next token in iteration, raising StopIteration when
done.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the next token in iteration, raising StopIteration when</span>
<span class="sd">    done.&quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">LEXER</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># can only happen at EOS</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;whitespace&quot;</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
            <span class="c1"># Okay, we got a token or something</span>
            <span class="k">break</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">HEXDIGIT</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">16</span><span class="p">),)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span>
        <span class="p">)</span>
        <span class="n">tok</span> <span class="o">=</span> <span class="n">LIT</span><span class="p">(</span><span class="n">name_str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">tok</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="sa">b</span><span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;startdict&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KEYWORD_DICT_BEGIN</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;enddict&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KEYWORD_DICT_END</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;startstr&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_endstr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()],</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lastgroup</span> <span class="o">==</span> <span class="s2">&quot;hexstr&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="n">SPC</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">+=</span> <span class="sa">b</span><span class="s2">&quot;0&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">unhexlify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
    <span class="c1"># Anything else is treated as a keyword (whether explicitly matched or not)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;true&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;false&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span><span class="p">,</span> <span class="n">KWD</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.nextline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">nextline</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the next line ending either with \r, \n, or \r\n,
starting at the current position.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">nextline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the next line ending either with \r, \n, or \r\n,</span>
<span class="sd">    starting at the current position.&quot;&quot;&quot;</span>
    <span class="n">linepos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">EOLR</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">linepos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">linepos</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.read" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read</span><span class="p">(</span><span class="n">objlen</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Read data from current position, advancing to the end of
this data.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objlen</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read data from current position, advancing to the end of</span>
<span class="sd">    this data.&quot;&quot;&quot;</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="n">objlen</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.seek" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Seek to a position and reinitialize parser state.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Seek to a position and reinitialize parser state.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_curtoken</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_curtokenpos</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tokens</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.Lexer.tell" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tell</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the current position in the buffer.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">tell</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current position in the buffer.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.parser.ObjectParser" class="doc doc-heading">
            <code>ObjectParser</code>


</h3>


    <div class="doc doc-contents ">


        <p>ObjectParser is used to parse PDF object streams (and
content streams, which have the same syntax).  Notably these
consist of, well, a stream of objects without the surrounding
<code>obj</code> and <code>endobj</code> tokens (which cannot occur in an object
stream).</p>
<p>They can contain indirect object references (so, must be
initialized with a <code>Document</code> to resolve these) but for perhaps
obvious reasons (how would you parse that) these cannot occur at
the top level of the stream, only inside an array or dictionary.</p>







              <details class="quote">
                <summary>Source code in <code>playa/parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ObjectParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ObjectParser is used to parse PDF object streams (and</span>
<span class="sd">    content streams, which have the same syntax).  Notably these</span>
<span class="sd">    consist of, well, a stream of objects without the surrounding</span>
<span class="sd">    `obj` and `endobj` tokens (which cannot occur in an object</span>
<span class="sd">    stream).</span>

<span class="sd">    They can contain indirect object references (so, must be</span>
<span class="sd">    initialized with a `Document` to resolve these) but for perhaps</span>
<span class="sd">    obvious reasons (how would you parse that) these cannot occur at</span>
<span class="sd">    the top level of the stream, only inside an array or dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">],</span>
        <span class="n">doc</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span> <span class="o">=</span> <span class="n">Lexer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">StackEntry</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strict</span> <span class="o">=</span> <span class="n">strict</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">newstream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Continue parsing from a new data stream.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span> <span class="o">=</span> <span class="n">Lexer</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear internal parser state.&quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[:]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">StackEntry</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over (position, object) tuples.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackEntry</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get next PDF object from stream (raises StopIteration at EOF).&quot;&quot;&quot;</span>
        <span class="n">top</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">],</span> <span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="ow">and</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ARRAY_BEGIN</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ARRAY_END</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_ARRAY_BEGIN</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">e</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing array from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_DICT_BEGIN</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_DICT_END</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_DICT_BEGIN</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">error_msg</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s2">&quot;Dictionary contains odd number of objects: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">objs</span>
                        <span class="p">)</span>
                        <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">literal_name</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span>
                        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">choplist</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="p">}</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">e</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing dict from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_PROC_BEGIN</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_PROC_END</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_PROC_BEGIN</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">e</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing proc from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_NULL</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_R</span><span class="p">:</span>
                <span class="c1"># reference to indirect object (only allowed inside another object)</span>
                <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Ignoring indirect object reference at top level&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_reference</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_BI</span><span class="p">:</span>
                <span class="c1"># Inline images must occur at the top level, otherwise</span>
                <span class="c1"># something is wrong (probably a corrupt file)</span>
                <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                        <span class="s2">&quot;Inline image not at top level of stream &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">top</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="si">}</span><span class="s2">)&quot;</span>
                    <span class="p">)</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ID</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inline_image</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Literally anything else, including any other keyword</span>
                <span class="c1"># (will be returned above if top is None, or later if</span>
                <span class="c1"># we are inside some object)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pop_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pop everything from the stack back to token.&quot;&quot;&quot;</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
            <span class="n">pos</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">last</span> <span class="ow">is</span> <span class="n">token</span><span class="p">:</span>
                <span class="n">context</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">context</span>
            <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unmatched end token </span><span class="si">{</span><span class="n">token</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_object_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">ObjRef</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an indirect object reference upon finding an &quot;R&quot; token.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_pos</span><span class="p">,</span> <span class="n">_genno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">_pos</span><span class="p">,</span> <span class="n">objid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                    <span class="s2">&quot;Expected generation and object id in indirect object reference&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Expected generation and object id in indirect object reference: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">e</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">objid</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">objid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                    <span class="s2">&quot;Object ID in reference at pos </span><span class="si">%d</span><span class="s2"> cannot be 0&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="p">,)</span>
                <span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Ignoring indirect object reference to 0 at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">ObjRef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_inline_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">InlineImage</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an inline image upon finding an &quot;ID&quot; token.</span>

<span class="sd">        Returns a tuple of the position of the target in the data and</span>
<span class="sd">        the image data.  Advances the file pointer to a position after</span>
<span class="sd">        the &quot;EI&quot; token that (we hope) ends the image.</span>

<span class="sd">        Note: WELCOME TO THE HELL!!!</span>
<span class="sd">            - The PDF standard only specifies that image data must be</span>
<span class="sd">              delimited by `ID` and `EI`, and that &quot;The bytes between</span>
<span class="sd">              the `ID` and `EI` operators shall be treated the same as a</span>
<span class="sd">              stream objects data, even though they do not follow the</span>
<span class="sd">              standard stream syntax.&quot;  What does that even mean?</span>
<span class="sd">            - And, that must be &quot;a single whitespace character&quot;</span>
<span class="sd">              following `ID` (floating in perfume, served in a man&#39;s</span>
<span class="sd">              hat), except in the case of `ASCIIHexDecode` or</span>
<span class="sd">              `ASCII85Decode` (in which case there can just be any</span>
<span class="sd">              whitespace you like, or none at all).</span>
<span class="sd">            - It&#39;s obviously impossible to determine what a &quot;conforming</span>
<span class="sd">              implementation&quot; of this standard is.</span>

<span class="sd">            In the easiest case, if it&#39;s `ASCIIHexDecode` data then we</span>
<span class="sd">            can just look for the first instance of `b&quot;EI&quot;`, ignoring all</span>
<span class="sd">            whitespace, since `b&quot;EI&quot;` is thankfully not a valid hex</span>
<span class="sd">            sequence.</span>

<span class="sd">            Otherwise, the stream data can, and inevitably will,</span>
<span class="sd">            contain the literal bytes `b&quot;EI&quot;`, so no, we can&#39;t just</span>
<span class="sd">            search for that.  In the case of `ASCII85Decode`, however,</span>
<span class="sd">            you can look for the `b&quot;~&gt;&quot;` end-of-data sequence but note</span>
<span class="sd">            that sometimes it... contains whitespace!</span>

<span class="sd">            So, we try for `b&quot;\\sEI\\b&quot;`, which is not foolproof since</span>
<span class="sd">            you could have the pixel values `(32, 69, 73)` in your</span>
<span class="sd">            image followed by some other byte... so in that case,</span>
<span class="sd">            expect a bunch of nonsense in the logs and possible data</span>
<span class="sd">            loss.  Also in the rare case where `b&quot;EI&quot;` was preceded by</span>
<span class="sd">            `b&quot;\\r\\n&quot;`, there will be an extra `\\r` in the image</span>
<span class="sd">            data.  Too bad.</span>

<span class="sd">            And finally if that doesn&#39;t work then we will try to salvage</span>
<span class="sd">            something by just looking for &quot;EI&quot;, somewhere, anywhere.  We</span>
<span class="sd">            take the most distant one, and if this causes you to lose</span>
<span class="sd">            data, well, it&#39;s definitely Adobe&#39;s fault.</span>

<span class="sd">            The moral of the story is that the author of this part of</span>
<span class="sd">            the PDF specification should have considered a career in</span>
<span class="sd">            literally anything else.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="ow">and</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ID</span>
        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Not ID: </span><span class="si">{</span><span class="n">token</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="n">idpos</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_BI</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid dictionary construct: </span><span class="si">{</span><span class="n">objs</span><span class="si">!r}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">literal_name</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">choplist</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

        <span class="n">target_re</span> <span class="o">=</span> <span class="n">EIR</span>
        <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">LITERALS_ASCII85_DECODE</span><span class="p">:</span>
                <span class="c1"># ASCII85: look for ~&gt;EI, ignoring all whitespace</span>
                <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">target_re</span> <span class="o">=</span> <span class="n">A85R</span>
            <span class="k">elif</span> <span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">LITERALS_ASCIIHEX_DECODE</span><span class="p">:</span>
                <span class="c1"># ASCIIHex: just look for EI</span>
                <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">target_re</span> <span class="o">=</span> <span class="n">EIEIR</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Find the start of the image data</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">idpos</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="n">initial_whitespace</span><span class="p">:</span>
            <span class="n">ws</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ws</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ID token not followed by whitespace: </span><span class="si">{</span><span class="n">ws</span><span class="si">!r}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="n">target_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">InlineImage</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
        <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Inline image at </span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2"> not terminated with </span><span class="si">{</span><span class="n">target_re</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="n">FURTHESTEIR</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Inline image at </span><span class="si">%d</span><span class="s2"> has no whitespace before EI, &quot;</span>
                <span class="s2">&quot;expect horrible data loss!!!&quot;</span><span class="p">,</span>
                <span class="n">pos</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">InlineImage</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Delegation follows</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Seek to a position.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">tell</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current position in the file.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objlen</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read data from a specified position, moving the current</span>
<span class="sd">        position to the end of this data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">objlen</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">nextline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read (and do not parse) next line from underlying data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">nexttoken</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the next token in iteration, raising StopIteration when</span>
<span class="sd">        done.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.parser.ObjectParser.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate over (position, object) tuples.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">StackEntry</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over (position, object) tuples.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.__next__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__next__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get next PDF object from stream (raises StopIteration at EOF).</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StackEntry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get next PDF object from stream (raises StopIteration at EOF).&quot;&quot;&quot;</span>
    <span class="n">top</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">],</span> <span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="ow">and</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nexttoken</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ARRAY_BEGIN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ARRAY_END</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_ARRAY_BEGIN</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">e</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing array from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_DICT_BEGIN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_DICT_END</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_DICT_BEGIN</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">error_msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;Dictionary contains odd number of objects: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">objs</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">literal_name</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">choplist</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">}</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">e</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing dict from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_PROC_BEGIN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_PROC_END</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_PROC_BEGIN</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">PDFSyntaxError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">e</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;When constructing proc from </span><span class="si">%r</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_NULL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_R</span><span class="p">:</span>
            <span class="c1"># reference to indirect object (only allowed inside another object)</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Ignoring indirect object reference at top level&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_reference</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_BI</span><span class="p">:</span>
            <span class="c1"># Inline images must occur at the top level, otherwise</span>
            <span class="c1"># something is wrong (probably a corrupt file)</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                    <span class="s2">&quot;Inline image not at top level of stream &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">top</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ID</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inline_image</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Literally anything else, including any other keyword</span>
            <span class="c1"># (will be returned above if top is None, or later if</span>
            <span class="c1"># we are inside some object)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.get_inline_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_inline_image</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get an inline image upon finding an "ID" token.</p>
<p>Returns a tuple of the position of the target in the data and
the image data.  Advances the file pointer to a position after
the "EI" token that (we hope) ends the image.</p>


<details class="note" open>
  <summary>WELCOME TO THE HELL!!!</summary>
  <ul>
<li>The PDF standard only specifies that image data must be
  delimited by <code>ID</code> and <code>EI</code>, and that "The bytes between
  the <code>ID</code> and <code>EI</code> operators shall be treated the same as a
  stream objects data, even though they do not follow the
  standard stream syntax."  What does that even mean?</li>
<li>And, that must be "a single whitespace character"
  following <code>ID</code> (floating in perfume, served in a man's
  hat), except in the case of <code>ASCIIHexDecode</code> or
  <code>ASCII85Decode</code> (in which case there can just be any
  whitespace you like, or none at all).</li>
<li>It's obviously impossible to determine what a "conforming
  implementation" of this standard is.</li>
</ul>
<p>In the easiest case, if it's <code>ASCIIHexDecode</code> data then we
can just look for the first instance of <code>b"EI"</code>, ignoring all
whitespace, since <code>b"EI"</code> is thankfully not a valid hex
sequence.</p>
<p>Otherwise, the stream data can, and inevitably will,
contain the literal bytes <code>b"EI"</code>, so no, we can't just
search for that.  In the case of <code>ASCII85Decode</code>, however,
you can look for the <code>b"~&gt;"</code> end-of-data sequence but note
that sometimes it... contains whitespace!</p>
<p>So, we try for <code>b"\sEI\b"</code>, which is not foolproof since
you could have the pixel values <code>(32, 69, 73)</code> in your
image followed by some other byte... so in that case,
expect a bunch of nonsense in the logs and possible data
loss.  Also in the rare case where <code>b"EI"</code> was preceded by
<code>b"\r\n"</code>, there will be an extra <code>\r</code> in the image
data.  Too bad.</p>
<p>And finally if that doesn't work then we will try to salvage
something by just looking for "EI", somewhere, anywhere.  We
take the most distant one, and if this causes you to lose
data, well, it's definitely Adobe's fault.</p>
<p>The moral of the story is that the author of this part of
the PDF specification should have considered a career in
literally anything else.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_inline_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">InlineImage</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an inline image upon finding an &quot;ID&quot; token.</span>

<span class="sd">    Returns a tuple of the position of the target in the data and</span>
<span class="sd">    the image data.  Advances the file pointer to a position after</span>
<span class="sd">    the &quot;EI&quot; token that (we hope) ends the image.</span>

<span class="sd">    Note: WELCOME TO THE HELL!!!</span>
<span class="sd">        - The PDF standard only specifies that image data must be</span>
<span class="sd">          delimited by `ID` and `EI`, and that &quot;The bytes between</span>
<span class="sd">          the `ID` and `EI` operators shall be treated the same as a</span>
<span class="sd">          stream objects data, even though they do not follow the</span>
<span class="sd">          standard stream syntax.&quot;  What does that even mean?</span>
<span class="sd">        - And, that must be &quot;a single whitespace character&quot;</span>
<span class="sd">          following `ID` (floating in perfume, served in a man&#39;s</span>
<span class="sd">          hat), except in the case of `ASCIIHexDecode` or</span>
<span class="sd">          `ASCII85Decode` (in which case there can just be any</span>
<span class="sd">          whitespace you like, or none at all).</span>
<span class="sd">        - It&#39;s obviously impossible to determine what a &quot;conforming</span>
<span class="sd">          implementation&quot; of this standard is.</span>

<span class="sd">        In the easiest case, if it&#39;s `ASCIIHexDecode` data then we</span>
<span class="sd">        can just look for the first instance of `b&quot;EI&quot;`, ignoring all</span>
<span class="sd">        whitespace, since `b&quot;EI&quot;` is thankfully not a valid hex</span>
<span class="sd">        sequence.</span>

<span class="sd">        Otherwise, the stream data can, and inevitably will,</span>
<span class="sd">        contain the literal bytes `b&quot;EI&quot;`, so no, we can&#39;t just</span>
<span class="sd">        search for that.  In the case of `ASCII85Decode`, however,</span>
<span class="sd">        you can look for the `b&quot;~&gt;&quot;` end-of-data sequence but note</span>
<span class="sd">        that sometimes it... contains whitespace!</span>

<span class="sd">        So, we try for `b&quot;\\sEI\\b&quot;`, which is not foolproof since</span>
<span class="sd">        you could have the pixel values `(32, 69, 73)` in your</span>
<span class="sd">        image followed by some other byte... so in that case,</span>
<span class="sd">        expect a bunch of nonsense in the logs and possible data</span>
<span class="sd">        loss.  Also in the rare case where `b&quot;EI&quot;` was preceded by</span>
<span class="sd">        `b&quot;\\r\\n&quot;`, there will be an extra `\\r` in the image</span>
<span class="sd">        data.  Too bad.</span>

<span class="sd">        And finally if that doesn&#39;t work then we will try to salvage</span>
<span class="sd">        something by just looking for &quot;EI&quot;, somewhere, anywhere.  We</span>
<span class="sd">        take the most distant one, and if this causes you to lose</span>
<span class="sd">        data, well, it&#39;s definitely Adobe&#39;s fault.</span>

<span class="sd">        The moral of the story is that the author of this part of</span>
<span class="sd">        the PDF specification should have considered a career in</span>
<span class="sd">        literally anything else.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="ow">and</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">KEYWORD_ID</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Not ID: </span><span class="si">{</span><span class="n">token</span><span class="si">!r}</span><span class="s2">&quot;</span>
    <span class="n">idpos</span> <span class="o">=</span> <span class="n">pos</span>
    <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_to</span><span class="p">(</span><span class="n">KEYWORD_BI</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid dictionary construct: </span><span class="si">{</span><span class="n">objs</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="n">literal_name</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">choplist</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">objs</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

    <span class="n">target_re</span> <span class="o">=</span> <span class="n">EIR</span>
    <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">filters</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">LITERALS_ASCII85_DECODE</span><span class="p">:</span>
            <span class="c1"># ASCII85: look for ~&gt;EI, ignoring all whitespace</span>
            <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">target_re</span> <span class="o">=</span> <span class="n">A85R</span>
        <span class="k">elif</span> <span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">LITERALS_ASCIIHEX_DECODE</span><span class="p">:</span>
            <span class="c1"># ASCIIHex: just look for EI</span>
            <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">target_re</span> <span class="o">=</span> <span class="n">EIEIR</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">initial_whitespace</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Find the start of the image data</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">idpos</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">initial_whitespace</span><span class="p">:</span>
        <span class="n">ws</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ws</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ID token not followed by whitespace: </span><span class="si">{</span><span class="n">ws</span><span class="si">!r}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">target_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">InlineImage</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
    <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Inline image at </span><span class="si">{</span><span class="n">pos</span><span class="si">}</span><span class="s2"> not terminated with </span><span class="si">{</span><span class="n">target_re</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">FURTHESTEIR</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Inline image at </span><span class="si">%d</span><span class="s2"> has no whitespace before EI, &quot;</span>
            <span class="s2">&quot;expect horrible data loss!!!&quot;</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">InlineImage</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">pos</span> <span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.get_object_reference" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_object_reference</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get an indirect object reference upon finding an "R" token.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_object_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">ObjRef</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an indirect object reference upon finding an &quot;R&quot; token.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_pos</span><span class="p">,</span> <span class="n">_genno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">_pos</span><span class="p">,</span> <span class="n">objid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;Expected generation and object id in indirect object reference&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Expected generation and object id in indirect object reference: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">e</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">objid</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">objid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">strict</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;Object ID in reference at pos </span><span class="si">%d</span><span class="s2"> cannot be 0&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="p">,)</span>
            <span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Ignoring indirect object reference to 0 at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">ObjRef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docref</span><span class="p">,</span> <span class="n">objid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.newstream" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">newstream</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Continue parsing from a new data stream.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">newstream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Continue parsing from a new data stream.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span> <span class="o">=</span> <span class="n">Lexer</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.nextline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">nextline</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Read (and do not parse) next line from underlying data.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">nextline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read (and do not parse) next line from underlying data.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">nextline</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.nexttoken" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">nexttoken</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the next token in iteration, raising StopIteration when
done.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">nexttoken</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Token</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the next token in iteration, raising StopIteration when</span>
<span class="sd">    done.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.pop_to" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pop_to</span><span class="p">(</span><span class="n">token</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Pop everything from the stack back to token.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pop_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">PSKeyword</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pop everything from the stack back to token.&quot;&quot;&quot;</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PDFObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
        <span class="n">pos</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">last</span> <span class="ow">is</span> <span class="n">token</span><span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">context</span>
        <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">PDFSyntaxError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unmatched end token </span><span class="si">{</span><span class="n">token</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.read" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read</span><span class="p">(</span><span class="n">objlen</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Read data from a specified position, moving the current
position to the end of this data.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objlen</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read data from a specified position, moving the current</span>
<span class="sd">    position to the end of this data.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">objlen</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.reset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Clear internal parser state.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear internal parser state.&quot;&quot;&quot;</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[:]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.seek" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Seek to a position.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Seek to a position.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.parser.ObjectParser.tell" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tell</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the current position in the file.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">tell</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current position in the file.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.parser.ObjectStreamParser" class="doc doc-heading">
            <code>ObjectStreamParser</code>


</h3>


    <div class="doc doc-contents ">


        <p>Parse indirect objects from an object stream.</p>







              <details class="quote">
                <summary>Source code in <code>playa/parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ObjectStreamParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse indirect objects from an object stream.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">stream</span><span class="p">:</span> <span class="n">ContentStream</span><span class="p">,</span>
        <span class="n">doc</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">ObjectParser</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">buffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nobj</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;N&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;First&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">objid</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">)</span>
                <span class="n">objid</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">objid</span><span class="p">)</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">int_value</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unexpected EOF in object stream&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">objid</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offsets</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nobj</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">]]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">objid</span><span class="p">,</span> <span class="n">opos</span><span class="p">),</span> <span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offsets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">+</span> <span class="n">opos</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid object stream: object </span><span class="si">%d</span><span class="s2"> is at </span><span class="si">%d</span><span class="s2">, should be at </span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">objid</span><span class="p">,</span>
                    <span class="n">pos</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">+</span> <span class="n">opos</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">yield</span> <span class="n">pos</span><span class="p">,</span> <span class="n">IndirectObject</span><span class="p">(</span><span class="n">objid</span><span class="o">=</span><span class="n">objid</span><span class="p">,</span> <span class="n">genno</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="playa.parser.reverse_iter_lines" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reverse_iter_lines</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Iterate backwards over lines starting at the current position.</p>
<p>This is used to locate the trailers at the end of a file.</p>


            <details class="quote">
              <summary>Source code in <code>playa/parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reverse_iter_lines</span><span class="p">(</span><span class="n">buffer</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate backwards over lines starting at the current position.</span>

<span class="sd">    This is used to locate the trailers at the end of a file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">endline</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">nidx</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="n">ridx</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="n">best</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">nidx</span><span class="p">,</span> <span class="n">ridx</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">best</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">buffer</span><span class="p">[</span><span class="n">best</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">endline</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">best</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">endline</span> <span class="o">=</span> <span class="n">best</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">best</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">buffer</span><span class="p">[</span><span class="n">pos</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.structure" class="doc doc-heading">
            <code>playa.structure</code>


</h2>

    <div class="doc doc-contents first">

        <p>Lazy interface to PDF logical structure (PDF 1.7 sect 14.7).</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="playa.structure.ContentItem" class="doc doc-heading">
            <code>ContentItem</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>Content item in logical structure tree.</p>
<p>This corresponds to an individual marked content section on a
specific page, and can be used to (lazily) find that section if
desired.</p>







              <details class="quote">
                <summary>Source code in <code>playa/structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ContentItem</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Content item in logical structure tree.</span>

<span class="sd">    This corresponds to an individual marked content section on a</span>
<span class="sd">    specific page, and can be used to (lazily) find that section if</span>
<span class="sd">    desired.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_pageref</span><span class="p">:</span> <span class="n">PageRef</span>
    <span class="n">mcid</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">stream</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ContentStream</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Page&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Specific page for this structure tree, if any.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">_deref_page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.ContentItem.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Specific page for this structure tree, if any.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.structure.ContentObject" class="doc doc-heading">
            <code>ContentObject</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>Content object in logical structure tree.</p>
<p>This corresponds to a content item that is an entire PDF (X)Object
(PDF 1.7 section 14.7.43), and can be used to (lazily) get that</p>
<p>The standard is very unclear on what this could be aside from an
<code>Annotation</code> or an <code>XObject</code>.  An XObject must be a content
stream, so that's clear enough... Otherwise, since the <code>Type</code> key
is not required in an annotation dictionary we presume that this
is an annotation if it's not present.</p>
<p>Not to be confused with <code>playa.page.ContentObject</code>.</p>







              <details class="quote">
                <summary>Source code in <code>playa/structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ContentObject</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Content object in logical structure tree.</span>

<span class="sd">    This corresponds to a content item that is an entire PDF (X)Object</span>
<span class="sd">    (PDF 1.7 section 14.7.43), and can be used to (lazily) get that</span>

<span class="sd">    The standard is very unclear on what this could be aside from an</span>
<span class="sd">    `Annotation` or an `XObject`.  An XObject must be a content</span>
<span class="sd">    stream, so that&#39;s clear enough... Otherwise, since the `Type` key</span>
<span class="sd">    is not required in an annotation dictionary we presume that this</span>
<span class="sd">    is an annotation if it&#39;s not present.</span>

<span class="sd">    Not to be confused with `playa.page.ContentObject`.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_pageref</span><span class="p">:</span> <span class="n">PageRef</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ContentStream</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">obj</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;XObjectObject&quot;</span><span class="p">,</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the underlying object, if possible.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">):</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">playa.page</span><span class="w"> </span><span class="kn">import</span> <span class="n">XObjectObject</span>

            <span class="k">return</span> <span class="n">XObjectObject</span><span class="o">.</span><span class="n">from_stream</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">,</span> <span class="n">xobjid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;XObject&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">objtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="k">if</span> <span class="n">objtype</span> <span class="ow">is</span> <span class="n">LITERAL_ANNOT</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">playa.page</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotation</span>

            <span class="k">return</span> <span class="n">Annotation</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PSLiteral</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Type of this object, usually LITERAL_ANNOT or LITERAL_XOBJECT.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">,</span> <span class="n">ContentStream</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">LITERAL_XOBJECT</span>
        <span class="n">objtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objtype</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">LITERAL_ANNOT</span>
        <span class="k">return</span> <span class="n">objtype</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Page&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Containing page for this content object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pageref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.ContentObject.obj" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">obj</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Return the underlying object, if possible.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.ContentObject.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Containing page for this content object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.ContentObject.type" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Type of this object, usually LITERAL_ANNOT or LITERAL_XOBJECT.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.structure.Element" class="doc doc-heading">
            <code>Element</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Findable (playa.structure.Findable)" href="#playa.structure.Findable">Findable</a></code></p>


        <p>Logical structure element.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="playa.structure.Element.props">props</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="playa.parser.PDFObject">PDFObject</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Structure element dictionary (PDF 1.7 table 323).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>playa/structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Element</span><span class="p">(</span><span class="n">Findable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logical structure element.</span>

<span class="sd">    Attributes:</span>
<span class="sd">      props: Structure element dictionary (PDF 1.7 table 323).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_docref</span><span class="p">:</span> <span class="n">DocumentRef</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Element&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Construct from PDF structure element dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">_docref</span><span class="o">=</span><span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span> <span class="n">props</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">literal_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Containing document for this element.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Page&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Containing page for this element, if any.&quot;&quot;&quot;</span>
        <span class="n">pg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Pg&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pg</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">objid</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;&#39;Pg&#39; entry not found in document: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;&#39;Pg&#39; entry is not an indirect object reference: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="s2">&quot;Tree&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LITERAL_STRUCTTREEROOT</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Tree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Element</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="n">ContentItem</span><span class="p">,</span> <span class="n">ContentObject</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="s2">&quot;K&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">:</span>
            <span class="n">kids</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;K&quot;</span><span class="p">])</span>
            <span class="k">yield from</span> <span class="n">_make_kids</span><span class="p">(</span><span class="n">kids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.Element.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Containing document for this element.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.Element.page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">page</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Containing page for this element, if any.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="playa.structure.Element.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Construct from PDF structure element dictionary.</p>


            <details class="quote">
              <summary>Source code in <code>playa/structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Element&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Construct from PDF structure element dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">_docref</span><span class="o">=</span><span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span> <span class="n">props</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.structure.Findable" class="doc doc-heading">
            <code>Findable</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Iterable">Iterable</span></code></p>


        <p>find() and find_all() methods that can be inherited to avoid
repeating oneself</p>







              <details class="quote">
                <summary>Source code in <code>playa/structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Findable</span><span class="p">(</span><span class="n">Iterable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;find() and find_all() methods that can be inherited to avoid</span>
<span class="sd">    repeating oneself&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find_all</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">matcher</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">MatchFunc</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate depth-first over matching elements in subtree.</span>

<span class="sd">        The `matcher` argument is either an element name, a regular</span>
<span class="sd">        expression, or a function taking a `Element` and</span>
<span class="sd">        returning `True` if the element matches.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_find_all</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">matcher</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">find</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">matcher</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">MatchFunc</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the first matching element in subtree.</span>

<span class="sd">        The `matcher` argument is either an element name, a regular</span>
<span class="sd">        expression, or a function taking a `Element` and</span>
<span class="sd">        returning `True` if the element matches.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">_find_all</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">matcher</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="playa.structure.Findable.find" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find</span><span class="p">(</span><span class="n">matcher</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Find the first matching element in subtree.</p>
<p>The <code>matcher</code> argument is either an element name, a regular
expression, or a function taking a <code>Element</code> and
returning <code>True</code> if the element matches.</p>


            <details class="quote">
              <summary>Source code in <code>playa/structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">matcher</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">MatchFunc</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the first matching element in subtree.</span>

<span class="sd">    The `matcher` argument is either an element name, a regular</span>
<span class="sd">    expression, or a function taking a `Element` and</span>
<span class="sd">    returning `True` if the element matches.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">_find_all</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">matcher</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="playa.structure.Findable.find_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_all</span><span class="p">(</span><span class="n">matcher</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate depth-first over matching elements in subtree.</p>
<p>The <code>matcher</code> argument is either an element name, a regular
expression, or a function taking a <code>Element</code> and
returning <code>True</code> if the element matches.</p>


            <details class="quote">
              <summary>Source code in <code>playa/structure.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_all</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">matcher</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Pattern</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">MatchFunc</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate depth-first over matching elements in subtree.</span>

<span class="sd">    The `matcher` argument is either an element name, a regular</span>
<span class="sd">    expression, or a function taking a `Element` and</span>
<span class="sd">    returning `True` if the element matches.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_find_all</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">matcher</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.structure.Tree" class="doc doc-heading">
            <code>Tree</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Findable (playa.structure.Findable)" href="#playa.structure.Findable">Findable</a></code></p>








              <details class="quote">
                <summary>Source code in <code>playa/structure.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Tree</span><span class="p">(</span><span class="n">Findable</span><span class="p">):</span>
    <span class="n">_docref</span><span class="p">:</span> <span class="n">DocumentRef</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_docref</span> <span class="o">=</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="n">ContentItem</span><span class="p">,</span> <span class="n">ContentObject</span><span class="p">]]:</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_iter_structure</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Document with which this structure tree is associated.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.structure.Tree.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Document with which this structure tree is associated.</p>

    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.outline" class="doc doc-heading">
            <code>playa.outline</code>


</h2>

    <div class="doc doc-contents first">

        <p>Lazy interface to PDF document outline (PDF 1.7 sect 12.3.3).</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="playa.outline.Action" class="doc doc-heading">
            <code>Action</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>PDF actions (PDF 1.7 sect 12.6)</p>







              <details class="quote">
                <summary>Source code in <code>playa/outline.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Action</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF actions (PDF 1.7 sect 12.6)&quot;&quot;&quot;</span>

    <span class="n">_docref</span><span class="p">:</span> <span class="n">DocumentRef</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PSLiteral</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">],</span> <span class="n">PSLiteral</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">destination</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Destination</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Destination of this action, if any.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;D&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">Destination</span><span class="o">.</span><span class="n">from_dest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;D&quot;</span><span class="p">]))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.outline.Action.destination" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">destination</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Destination of this action, if any.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.outline.Action.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.outline.Destination" class="doc doc-heading">
            <code>Destination</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>PDF destinations (PDF 1.7 sect 12.3.2)</p>







              <details class="quote">
                <summary>Source code in <code>playa/outline.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Destination</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF destinations (PDF 1.7 sect 12.3.2)&quot;&quot;&quot;</span>

    <span class="n">_docref</span><span class="p">:</span> <span class="n">DocumentRef</span>
    <span class="n">page_idx</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">display</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PSLiteral</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">coords</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dest</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PSLiteral</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Destination&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">doc</span><span class="o">.</span><span class="n">destinations</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Unknown destination type: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_list</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Destination&quot;</span><span class="p">:</span>
        <span class="n">pageobj</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span> <span class="o">=</span> <span class="n">dest</span>
        <span class="n">page_idx</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pageobj</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="c1"># Not really sure if this is page number or page index...</span>
            <span class="n">page_idx</span> <span class="o">=</span> <span class="n">pageobj</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pageobj</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">page_idx</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">pageobj</span><span class="o">.</span><span class="n">objid</span><span class="p">)</span><span class="o">.</span><span class="n">page_idx</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid page object in destination: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pageobj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unrecognized page in destination object: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pageobj</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">display</span><span class="p">,</span> <span class="n">PSLiteral</span><span class="p">):</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Unknown display type: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">display</span><span class="p">)</span>
            <span class="n">display</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Destination</span><span class="p">(</span>
            <span class="n">_docref</span><span class="o">=</span><span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">),</span>
            <span class="n">page_idx</span><span class="o">=</span><span class="n">page_idx</span><span class="p">,</span>
            <span class="n">display</span><span class="o">=</span><span class="n">display</span><span class="p">,</span>
            <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="playa.outline.Outline" class="doc doc-heading">
            <code>Outline</code>


</h3>


    <div class="doc doc-contents ">


        <p>PDF document outline (PDF 1.7 sect 12.3.3)</p>







              <details class="quote">
                <summary>Source code in <code>playa/outline.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Outline</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PDF document outline (PDF 1.7 sect 12.3.3)&quot;&quot;&quot;</span>

    <span class="n">_docref</span><span class="p">:</span> <span class="n">DocumentRef</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PDFObject</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="s2">&quot;Document&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_docref</span> <span class="o">=</span> <span class="n">_ref_document</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">props</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;Outlines&quot;</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;Outline&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="s2">&quot;First&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span> <span class="ow">and</span> <span class="s2">&quot;Last&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">:</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;First&quot;</span><span class="p">]</span>
            <span class="k">while</span> <span class="n">ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Not an indirect object reference: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_ref</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
                <span class="n">ref</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Next&quot;</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">out</span>
                <span class="k">if</span> <span class="n">ref</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;Last&quot;</span><span class="p">]:</span>
                    <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_from_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">:</span> <span class="n">ObjRef</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Outline&quot;</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">Outline</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">Outline</span><span class="p">)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">_docref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_docref</span>
        <span class="n">out</span><span class="o">.</span><span class="n">props</span> <span class="o">=</span> <span class="n">dict_value</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Document&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get associated document if it exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_deref_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">raw</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Title&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Title is not a string: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">raw</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">decode_text</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">destination</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Destination</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Destination for this outline item.</span>

<span class="sd">        Note: Special case of `GoTo` actions.</span>
<span class="sd">            Since internal `GoTo` actions (PDF 1.7 sect 12.6.4.2) in</span>
<span class="sd">            outlines and links are entirely equivalent to</span>
<span class="sd">            destinations, if one exists, it will be returned here as</span>
<span class="sd">            well.</span>

<span class="sd">        Returns:</span>
<span class="sd">            destination, if one exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="n">resolve1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Dest&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">dest</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Destination</span><span class="o">.</span><span class="n">from_dest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span>
        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">action</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ACTION_GOTO</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">action</span><span class="o">.</span><span class="n">destination</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">action</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Action</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_docref</span><span class="p">,</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">element</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Element</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The structure element associated with this outline item, if</span>
<span class="sd">        any.</span>

<span class="sd">        Returns:</span>
<span class="sd">            structure element, if one exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Element</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">dict_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;SE&quot;</span><span class="p">]))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Outline&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Parent&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">ObjRef</span><span class="p">):</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Parent is not indirect object reference: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_ref</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="playa.outline.Outline.destination" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">destination</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Destination for this outline item.</p>


<details class="note" open>
  <summary>Special case of <code>GoTo</code> actions.</summary>
  <p>Since internal <code>GoTo</code> actions (PDF 1.7 sect 12.6.4.2) in
outlines and links are entirely equivalent to
destinations, if one exists, it will be returned here as
well.</p>
</details>

    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="Destination


  
      dataclass
   (playa.outline.Destination)" href="#playa.outline.Destination">Destination</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>destination, if one exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.outline.Outline.doc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">doc</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get associated document if it exists.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="playa.outline.Outline.element" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">element</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>The structure element associated with this outline item, if
any.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="Element


  
      dataclass
   (playa.structure.Element)" href="#playa.structure.Element">Element</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>structure element, if one exists.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="playa.worker" class="doc doc-heading">
            <code>playa.worker</code>


</h2>

    <div class="doc doc-contents first">

        <p>Worker subprocess related functions and data.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="playa.worker.in_worker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">in_worker</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Are we currently in a worker process?</p>


            <details class="quote">
              <summary>Source code in <code>playa/worker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">in_worker</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Are we currently in a worker process?&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">__pdf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; David Huggins-Daines 2024-present
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>